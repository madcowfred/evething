"use strict";function parseUri(a){for(var b=parseUri.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d}function parseQueryString(){var a=(window.location.search||"?").substr(1),b={};return a.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(a,c,d){(b[c]=b[c]||[]).push(d.replace(/\+/g," "))}),b}function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}function __duration(a){var b=Math.floor(a/60);a%=60;var c=Math.floor(b/60);b%=60;var d=Math.floor(c/24);c%=24;var e=[];return 0!=d&&(e[e.length]=d+"d"),0!=c&&(e[e.length]=c+"h"),0!=b&&(e[e.length]=b+"m"),0!=a&&(e[e.length]=a+"s"),e}!function(a){a.extend({tablesorter:new function(){function b(a){"undefined"!=typeof console&&"undefined"!=typeof console.log?console.log(a):alert(a)}function c(a,c){b(a+" ("+((new Date).getTime()-c.getTime())+"ms)")}function d(b,c,d){if(!c)return"";var e=b.config,f=e.textExtraction,g="";return g="simple"===f?e.supportsTextContent?c.textContent:a(c).text():"function"==typeof f?f(c,b,d):"object"==typeof f&&f.hasOwnProperty(d)?f[d](c,b,d):e.supportsTextContent?c.textContent:a(c).text(),a.trim(g)}function e(a,c,e,f){for(var g,h=w.parsers.length,i=!1,j="",k=!0;""===j&&k;)e++,c[e]?(i=c[e].cells[f],j=d(a,i,f),a.config.debug&&b("Checking if value was empty on row "+e+", column: "+f+': "'+j+'"')):k=!1;for(;--h>=0;)if(g=w.parsers[h],g&&"text"!==g.id&&g.is&&g.is(j,a,i))return g;return w.getParserById("text")}function f(a){var c,d,f,g,h,i,j,k=a.config,l=k.$tbodies=k.$table.children("tbody:not(."+k.cssInfoBlock+")"),m="";if(0===l.length)return k.debug?b("*Empty table!* Not building a parser cache"):"";if(c=l[0].rows,c[0])for(d=[],f=c[0].cells.length,g=0;f>g;g++)h=k.$headers.filter(":not([colspan])"),h=h.add(k.$headers.filter('[colspan="1"]')).filter('[data-column="'+g+'"]:last'),i=k.headers[g],j=w.getParserById(w.getData(h,i,"sorter")),k.empties[g]=w.getData(h,i,"empty")||k.emptyTo||(k.emptyToBottom?"bottom":"top"),k.strings[g]=w.getData(h,i,"string")||k.stringTo||"max",j||(j=e(a,c,-1,g)),k.debug&&(m+="column:"+g+"; parser:"+j.id+"; string:"+k.strings[g]+"; empty: "+k.empties[g]+"\n"),d.push(j);k.debug&&b(m),k.parsers=d}function g(e){var f,g,h,i,j,k,l,m,n,o,p=e.tBodies,q=e.config,r=q.parsers,s=[];if(q.cache={},!r)return q.debug?b("*Empty table!* Not building a cache"):"";for(q.debug&&(o=new Date),q.showProcessing&&w.isProcessing(e,!0),l=0;l<p.length;l++)if(q.cache[l]={row:[],normalized:[]},!a(p[l]).hasClass(q.cssInfoBlock)){for(f=p[l]&&p[l].rows.length||0,g=p[l].rows[0]&&p[l].rows[0].cells.length||0,j=0;f>j;++j)if(m=a(p[l].rows[j]),n=[],m.hasClass(q.cssChildRow))q.cache[l].row[q.cache[l].row.length-1]=q.cache[l].row[q.cache[l].row.length-1].add(m);else{for(q.cache[l].row.push(m),k=0;g>k;++k)h=d(e,m[0].cells[k],k),i=r[k].format(h,e,m[0].cells[k],k),n.push(i),"numeric"===(r[k].type||"").toLowerCase()&&(s[k]=Math.max(Math.abs(i)||0,s[k]||0));n.push(q.cache[l].normalized.length),q.cache[l].normalized.push(n)}q.cache[l].colMax=s}q.showProcessing&&w.isProcessing(e),q.debug&&c("Building cache for "+f+" rows",o)}function h(b,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=b.config,r=b.tBodies,s=[],t=q.cache;if(t[0]){for(q.debug&&(p=new Date),m=0;m<r.length;m++)if(i=a(r[m]),i.length&&!i.hasClass(q.cssInfoBlock)){for(j=w.processTbody(b,i,!0),e=t[m].row,f=t[m].normalized,g=f.length,h=g?f[0].length-1:0,k=0;g>k;k++)if(o=f[k][h],s.push(e[o]),!q.appender||!q.removeRows)for(n=e[o].length,l=0;n>l;l++)j.append(e[o][l]);w.processTbody(b,j,!1)}q.appender&&q.appender(b,s),q.debug&&c("Rebuilt table",p),d||w.applyWidget(b),a(b).trigger("sortEnd",b)}}function i(b){var c,d,e,f,g,h,i,j,k,l,m,n,o=[],p={},q=0,r=a(b).find("thead:eq(0), tfoot").children("tr");for(c=0;c<r.length;c++)for(h=r[c].cells,d=0;d<h.length;d++){for(g=h[d],i=g.parentNode.rowIndex,j=i+"-"+g.cellIndex,k=g.rowSpan||1,l=g.colSpan||1,"undefined"==typeof o[i]&&(o[i]=[]),e=0;e<o[i].length+1;e++)if("undefined"==typeof o[i][e]){m=e;break}for(p[j]=m,q=Math.max(m,q),a(g).attr({"data-column":m}),e=i;i+k>e;e++)for("undefined"==typeof o[e]&&(o[e]=[]),n=o[e],f=m;m+l>f;f++)n[f]="x"}return b.config.columns=q,p}function j(a){return/^d/i.test(a)||1===a}function k(d){var e,f,g,h,k,l,n,o=i(d),p=d.config;p.headerList=[],p.headerContent=[],p.debug&&(n=new Date),h=p.cssIcon?'<i class="'+p.cssIcon+'"></i>':"",p.$headers=a(d).find(p.selectorHeaders).each(function(b){f=a(this),e=p.headers[b],"false"!==w.getData(f,p.headers[b],"sorter")&&(p.headerContent[b]=this.innerHTML,k=p.headerTemplate.replace(/\{content\}/g,this.innerHTML).replace(/\{icon\}/g,h),p.onRenderTemplate&&(g=p.onRenderTemplate.apply(f,[b,k]),g&&"string"==typeof g&&(k=g)),this.innerHTML='<div class="tablesorter-header-inner">'+k+"</div>",p.onRenderHeader&&p.onRenderHeader.apply(f,[b]),this.column=o[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=j(w.getData(f,e,"sortInitialOrder")||p.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,l=w.getData(f,e,"lockedOrder")||!1,"undefined"!=typeof l&&l!==!1&&(this.order=this.lockedOrder=j(l)?[1,1,1]:[0,0,0]),f.addClass(p.cssHeader),p.headerList[b]=this,f.parent().addClass(p.cssHeaderRow),f.attr("tabindex",0))}),m(d),p.debug&&(c("Built headers:",n),b(p.$headers))}function l(a,b,c){var d=a.config;d.$table.find(d.selectorRemove).remove(),f(a),g(a),u(d.$table,b,c)}function m(b){var c,d=b.config;d.$headers.each(function(b,e){c="false"===w.getData(e,d.headers[b],"sorter"),e.sortDisabled=c,a(e)[c?"addClass":"removeClass"]("sorter-false")})}function n(b){var c,d,e,f,g=b.config,h=g.sortList,i=[g.cssAsc,g.cssDesc],j=a(b).find("tfoot tr").children().removeClass(i.join(" "));for(g.$headers.removeClass(i.join(" ")),f=h.length,d=0;f>d;d++)if(2!==h[d][1]&&(c=g.$headers.not(".sorter-false").filter('[data-column="'+h[d][0]+'"]'+(1===f?":last":"")),c.length))for(e=0;e<c.length;e++)c[e].sortDisabled||(c.eq(e).addClass(i[h[d][1]]),j.length&&j.filter('[data-column="'+h[d][0]+'"]').eq(e).addClass(i[h[d][1]]))}function o(b){if(b.config.widthFixed&&0===a(b).find("colgroup").length){var c=a("<colgroup>"),d=a(b).width();a(b.tBodies[0]).find("tr:first").children("td").each(function(){c.append(a("<col>").css("width",parseInt(a(this).width()/d*1e3,10)/10+"%"))}),a(b).prepend(c)}}function p(b,c){var d,e,f,g=b.config,h=c||g.sortList;g.sortList=[],a.each(h,function(b,c){d=[parseInt(c[0],10),parseInt(c[1],10)],f=g.headerList[d[0]],f&&(g.sortList.push(d),e=a.inArray(d[1],f.order),f.count=e>=0?e:d[1]%(g.sortReset?3:2))})}function q(a,b){return a&&a[b]?a[b].type||"":""}function r(b,c,d){var e,f,g,i,j,k=b.config,l=!d[k.sortMultiSortKey],m=a(b);if(m.trigger("sortStart",b),c.count=d[k.sortResetKey]?2:(c.count+1)%(k.sortReset?3:2),k.sortRestart&&(f=c,k.$headers.each(function(){this===f||!l&&a(this).is("."+k.cssDesc+",."+k.cssAsc)||(this.count=-1)})),f=c.column,l){if(k.sortList=[],null!==k.sortForce)for(e=k.sortForce,g=0;g<e.length;g++)e[g][0]!==f&&k.sortList.push(e[g]);if(i=c.order[c.count],2>i&&(k.sortList.push([f,i]),c.colSpan>1))for(g=1;g<c.colSpan;g++)k.sortList.push([f+g,i])}else if(k.sortAppend&&k.sortList.length>1&&w.isValueInArray(k.sortAppend[0][0],k.sortList)&&k.sortList.pop(),w.isValueInArray(f,k.sortList))for(g=0;g<k.sortList.length;g++)j=k.sortList[g],i=k.headerList[j[0]],j[0]===f&&(j[1]=i.order[i.count],2===j[1]&&(k.sortList.splice(g,1),i.count=-1));else if(i=c.order[c.count],2>i&&(k.sortList.push([f,i]),c.colSpan>1))for(g=1;g<c.colSpan;g++)k.sortList.push([f+g,i]);if(null!==k.sortAppend)for(e=k.sortAppend,g=0;g<e.length;g++)e[g][0]!==f&&k.sortList.push(e[g]);m.trigger("sortBegin",b),setTimeout(function(){n(b),s(b),h(b)},1)}function s(b){var d,e,f,g,h,i,j,k,l,m,n=0,o=b.config,p=o.sortList,r=p.length,s=b.tBodies.length;if(!o.serverSideSorting&&o.cache[0]){for(o.debug&&(d=new Date),f=0;s>f;f++)h=o.cache[f].colMax,i=o.cache[f].normalized,j=i.length,m=i&&i[0]?i[0].length-1:0,i.sort(function(c,d){for(e=0;r>e;e++){g=p[e][0],l=p[e][1],k=/n/i.test(q(o.parsers,g))?"Numeric":"Text",k+=0===l?"":"Desc",/Numeric/.test(k)&&o.strings[g]&&(n="boolean"==typeof o.string[o.strings[g]]?(0===l?1:-1)*(o.string[o.strings[g]]?-1:1):o.strings[g]?o.string[o.strings[g]]||0:0);var f=a.tablesorter["sort"+k](b,c[g],d[g],g,h[g],n);if(f)return f}return c[m]-d[m]});o.debug&&c("Sorting on "+p.toString()+" and dir "+l+" time",d)}}function t(a,b){a.trigger("updateComplete"),"function"==typeof b&&b(a[0])}function u(a,b,c){b===!1||a[0].isProcessing?t(a,c):a.trigger("sorton",[a[0].config.sortList,function(){t(a,c)}])}function v(b){var c,e,i=b.config,j=i.$table;i.$headers.find(i.selectorSort).add(i.$headers.filter(i.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(c,d){if(1!==(c.which||c.button)&&!/sort|keypress/.test(c.type)||"keypress"===c.type&&13!==c.which)return!1;if("mouseup"===c.type&&d!==!0&&(new Date).getTime()-e>250)return!1;if("mousedown"===c.type)return e=(new Date).getTime(),"INPUT"===c.target.tagName?"":!i.cancelSelection;i.delayInit&&!i.cache&&g(b);var f=/TH|TD/.test(this.tagName)?a(this):a(this).parents("th, td").filter(":first"),h=f[0];h.sortDisabled||r(b,h,c)}),i.cancelSelection&&i.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),j.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(a){a.stopPropagation(),i.sortList=[],n(b),s(b),h(b)}).bind("updateAll.tablesorter",function(a,c,d){a.stopPropagation(),w.refreshWidgets(b,!0,!0),w.restoreHeaders(b),k(b),v(b),l(b,c,d)}).bind("update.tablesorter updateRows.tablesorter",function(a,c,d){a.stopPropagation(),m(b),l(b,c,d)}).bind("updateCell.tablesorter",function(c,e,f,g){c.stopPropagation(),j.find(i.selectorRemove).remove();var h,k,l,m=j.find("tbody"),n=m.index(a(e).parents("tbody").filter(":first")),o=a(e).parents("tr").filter(":first");e=a(e)[0],m.length&&n>=0&&(k=m.eq(n).find("tr").index(o),l=e.cellIndex,h=i.cache[n].normalized[k].length-1,i.cache[n].row[b.config.cache[n].normalized[k][h]]=o,i.cache[n].normalized[k][l]=i.parsers[l].format(d(b,e,l),b,e,l),u(j,f,g))}).bind("addRows.tablesorter",function(a,e,g,h){a.stopPropagation();var k,l=e.filter("tr").length,m=[],n=e[0].cells.length,o=j.find("tbody").index(e.parents("tbody").filter(":first"));for(i.parsers||f(b),k=0;l>k;k++){for(c=0;n>c;c++)m[c]=i.parsers[c].format(d(b,e[k].cells[c],c),b,e[k].cells[c],c);m.push(i.cache[o].row.length),i.cache[o].row.push([e[k]]),i.cache[o].normalized.push(m),m=[]}u(j,g,h)}).bind("sorton.tablesorter",function(a,c,d,e){a.stopPropagation(),j.trigger("sortStart",this),p(b,c),n(b),j.trigger("sortBegin",this),s(b),h(b,e),"function"==typeof d&&d(b)}).bind("appendCache.tablesorter",function(a,c,d){a.stopPropagation(),h(b,d),"function"==typeof c&&c(b)}).bind("applyWidgetId.tablesorter",function(a,c){a.stopPropagation(),w.getWidgetById(c).format(b,i,i.widgetOptions)}).bind("applyWidgets.tablesorter",function(a,c){a.stopPropagation(),w.applyWidget(b,c)}).bind("refreshWidgets.tablesorter",function(a,c,d){a.stopPropagation(),w.refreshWidgets(b,c,d)}).bind("destroy.tablesorter",function(a,c,d){a.stopPropagation(),w.destroy(b,c,d)})}var w=this;w.version="2.10.8",w.parsers=[],w.widgets=[],w.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"tablesorter",cssAsc:"tablesorter-headerAsc",cssChildRow:"tablesorter-childRow",cssDesc:"tablesorter-headerDesc",cssHeader:"tablesorter-header",cssHeaderRow:"tablesorter-headerRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",cssProcessing:"tablesorter-processing",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},w.log=b,w.benchmark=c,w.construct=function(c){return this.each(function(){if(!this.tHead||0===this.tBodies.length||this.hasInitialized===!0)return this.config&&this.config.debug?b("stopping initialization! No thead, tbody or tablesorter has already been initialized"):"";var d,e=a(this),h=this,i="",j=a.metadata;h.hasInitialized=!1,h.isProcessing=!0,h.config={},d=a.extend(!0,h.config,w.defaults,c),a.data(h,"tablesorter",d),d.debug&&a.data(h,"startoveralltimer",new Date),d.supportsTextContent="x"===a("<span>x</span>")[0].textContent,d.supportsDataObject=parseFloat(a.fn.jquery)>=1.4,d.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1},/tablesorter\-/.test(e.attr("class"))||(i=""!==d.theme?" tablesorter-"+d.theme:""),d.$table=e.addClass(d.tableClass+i),d.$tbodies=e.children("tbody:not(."+d.cssInfoBlock+")"),k(h),o(h),f(h),d.delayInit||g(h),v(h),d.supportsDataObject&&"undefined"!=typeof e.data().sortlist?d.sortList=e.data().sortlist:j&&e.metadata()&&e.metadata().sortlist&&(d.sortList=e.metadata().sortlist),w.applyWidget(h,!0),d.sortList.length>0?e.trigger("sorton",[d.sortList,{},!d.initWidgets]):d.initWidgets&&w.applyWidget(h),d.showProcessing&&e.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(a){w.isProcessing(h,"sortBegin"===a.type)}),h.hasInitialized=!0,h.isProcessing=!1,d.debug&&w.benchmark("Overall initialization time",a.data(h,"startoveralltimer")),e.trigger("tablesorter-initialized",h),"function"==typeof d.initialized&&d.initialized(h)})},w.isProcessing=function(b,c,d){b=a(b);var e=b[0].config,f=d||b.find("."+e.cssHeader);c?(e.sortList.length>0&&(f=f.filter(function(){return this.sortDisabled?!1:w.isValueInArray(parseFloat(a(this).attr("data-column")),e.sortList)})),f.addClass(e.cssProcessing)):f.removeClass(e.cssProcessing)},w.processTbody=function(b,c,d){var e;return d?(b.isProcessing=!0,c.before('<span class="tablesorter-savemyplace"/>'),e=a.fn.detach?c.detach():c.remove()):(e=a(b).find("span.tablesorter-savemyplace"),c.insertAfter(e),e.remove(),void(b.isProcessing=!1))},w.clearTableBody=function(b){a(b)[0].config.$tbodies.empty()},w.restoreHeaders=function(b){var c=b.config;c.$table.find(c.selectorHeaders).each(function(b){a(this).find(".tablesorter-header-inner").length&&a(this).html(c.headerContent[b])})},w.destroy=function(b,c,d){if(b=a(b)[0],b.hasInitialized){w.refreshWidgets(b,!0,!0);var e=a(b),f=b.config,g=e.find("thead:first"),h=g.find("tr."+f.cssHeaderRow).removeClass(f.cssHeaderRow),i=e.find("tfoot:first > tr").children("th, td");g.find("tr").not(h).remove(),e.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),f.$headers.add(i).removeClass(f.cssHeader+" "+f.cssAsc+" "+f.cssDesc).removeAttr("data-column"),h.find(f.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),w.restoreHeaders(b),c!==!1&&e.removeClass(f.tableClass+" tablesorter-"+f.theme),b.hasInitialized=!1,"function"==typeof d&&d(b)}},w.regex=[/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,/^0x[0-9a-f]+$/i],w.sortText=function(a,b,c,d){if(b===c)return 0;var e,f,g,h,i,j,k,l,m=a.config,n=m.string[m.empties[d]||m.emptyTo],o=w.regex;if(""===b&&0!==n)return"boolean"==typeof n?n?-1:1:-n||-1;if(""===c&&0!==n)return"boolean"==typeof n?n?1:-1:n||1;if("function"==typeof m.textSorter)return m.textSorter(b,c,a,d);if(e=b.replace(o[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),g=c.replace(o[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),f=parseInt(b.match(o[2]),16)||1!==e.length&&b.match(o[1])&&Date.parse(b),h=parseInt(c.match(o[2]),16)||f&&c.match(o[1])&&Date.parse(c)||null){if(h>f)return-1;if(f>h)return 1}for(l=Math.max(e.length,g.length),k=0;l>k;k++){if(i=isNaN(e[k])?e[k]||0:parseFloat(e[k])||0,j=isNaN(g[k])?g[k]||0:parseFloat(g[k])||0,isNaN(i)!==isNaN(j))return isNaN(i)?1:-1;if(typeof i!=typeof j&&(i+="",j+=""),j>i)return-1;if(i>j)return 1}return 0},w.sortTextDesc=function(a,b,c,d){if(b===c)return 0;var e=a.config,f=e.string[e.empties[d]||e.emptyTo];return""===b&&0!==f?"boolean"==typeof f?f?-1:1:f||1:""===c&&0!==f?"boolean"==typeof f?f?1:-1:-f||-1:"function"==typeof e.textSorter?e.textSorter(c,b,a,d):w.sortText(a,c,b)},w.getTextValue=function(a,b,c){if(b){var d,e=a?a.length:0,f=b+c;for(d=0;e>d;d++)f+=a.charCodeAt(d);return c*f}return 0},w.sortNumeric=function(a,b,c,d,e,f){if(b===c)return 0;var g=a.config,h=g.string[g.empties[d]||g.emptyTo];return""===b&&0!==h?"boolean"==typeof h?h?-1:1:-h||-1:""===c&&0!==h?"boolean"==typeof h?h?1:-1:h||1:(isNaN(b)&&(b=w.getTextValue(b,e,f)),isNaN(c)&&(c=w.getTextValue(c,e,f)),b-c)},w.sortNumericDesc=function(a,b,c,d,e,f){if(b===c)return 0;var g=a.config,h=g.string[g.empties[d]||g.emptyTo];return""===b&&0!==h?"boolean"==typeof h?h?-1:1:h||1:""===c&&0!==h?"boolean"==typeof h?h?1:-1:-h||-1:(isNaN(b)&&(b=w.getTextValue(b,e,f)),isNaN(c)&&(c=w.getTextValue(c,e,f)),c-b)},w.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},w.replaceAccents=function(a){var b,c="[",d=w.characterEquivalents;if(!w.characterRegex){w.characterRegexArray={};for(b in d)"string"==typeof b&&(c+=d[b],w.characterRegexArray[b]=new RegExp("["+d[b]+"]","g"));w.characterRegex=new RegExp(c+"]")}if(w.characterRegex.test(a))for(b in d)"string"==typeof b&&(a=a.replace(w.characterRegexArray[b],b));return a},w.isValueInArray=function(a,b){var c,d=b.length;for(c=0;d>c;c++)if(b[c][0]===a)return!0;return!1},w.addParser=function(a){var b,c=w.parsers.length,d=!0;for(b=0;c>b;b++)w.parsers[b].id.toLowerCase()===a.id.toLowerCase()&&(d=!1);d&&w.parsers.push(a)},w.getParserById=function(a){var b,c=w.parsers.length;for(b=0;c>b;b++)if(w.parsers[b].id.toLowerCase()===a.toString().toLowerCase())return w.parsers[b];return!1},w.addWidget=function(a){w.widgets.push(a)},w.getWidgetById=function(a){var b,c,d=w.widgets.length;for(b=0;d>b;b++)if(c=w.widgets[b],c&&c.hasOwnProperty("id")&&c.id.toLowerCase()===a.toLowerCase())return c},w.applyWidget=function(b,d){b=a(b)[0];var e,f,g,h=b.config,i=h.widgetOptions,j=[];h.debug&&(e=new Date),h.widgets.length&&(h.widgets=a.grep(h.widgets,function(b,c){return a.inArray(b,h.widgets)===c}),a.each(h.widgets||[],function(a,b){g=w.getWidgetById(b),g&&g.id&&(g.priority||(g.priority=10),j[a]=g)}),j.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),a.each(j,function(c,e){e&&(d?(e.hasOwnProperty("options")&&(i=b.config.widgetOptions=a.extend(!0,{},e.options,i)),e.hasOwnProperty("init")&&e.init(b,e,h,i)):!d&&e.hasOwnProperty("format")&&e.format(b,h,i,!1))})),h.debug&&(f=h.widgets.length,c("Completed "+(d===!0?"initializing ":"applying ")+f+" widget"+(1!==f?"s":""),e))},w.refreshWidgets=function(c,d,e){c=a(c)[0];var f,g=c.config,h=g.widgets,i=w.widgets,j=i.length;for(f=0;j>f;f++)i[f]&&i[f].id&&(d||a.inArray(i[f].id,h)<0)&&(g.debug&&b("Refeshing widgets: Removing "+i[f].id),i[f].hasOwnProperty("remove")&&i[f].remove(c,g,g.widgetOptions));e!==!0&&w.applyWidget(c,d)},w.getData=function(b,c,d){var e,f,g="",h=a(b);return h.length?(e=a.metadata?h.metadata():!1,f=" "+(h.attr("class")||""),"undefined"!=typeof h.data(d)||"undefined"!=typeof h.data(d.toLowerCase())?g+=h.data(d)||h.data(d.toLowerCase()):e&&"undefined"!=typeof e[d]?g+=e[d]:c&&"undefined"!=typeof c[d]?g+=c[d]:" "!==f&&f.match(" "+d+"-")&&(g=f.match(new RegExp("\\s"+d+"-([\\w-]+)"))[1]||""),a.trim(g)):""},w.formatFloat=function(b,c){if("string"!=typeof b||""===b)return b;var d,e=c&&c.config?c.config.usNumberFormat!==!1:"undefined"!=typeof c?c:!0;return b=e?b.replace(/,/g,""):b.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(b)&&(b=b.replace(/^\s*\(/,"-").replace(/\)/,"")),d=parseFloat(b),isNaN(d)?a.trim(b):d},w.isDigit=function(a){return isNaN(a)?/^[\-+(]?\d+[)]?$/.test(a.toString().replace(/[,.'"\s]/g,"")):!0}}});var b=a.tablesorter;a.fn.extend({tablesorter:b.construct}),b.addParser({id:"text",is:function(){return!0},format:function(c,d){var e=d.config;return c&&(c=a.trim(e.ignoreCase?c.toLocaleLowerCase():c),c=e.sortLocaleCompare?b.replaceAccents(c):c),c},type:"text"}),b.addParser({id:"digit",is:function(a){return b.isDigit(a)},format:function(c,d){var e=b.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),d);return c&&"number"==typeof e?e:c?a.trim(c&&d.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"}),b.addParser({id:"currency",is:function(a){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((a||"").replace(/[,. ]/g,""))},format:function(c,d){var e=b.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),d);return c&&"number"==typeof e?e:c?a.trim(c&&d.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"}),b.addParser({id:"ipAddress",is:function(a){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(a)},format:function(a,c){var d,e=a?a.split("."):"",f="",g=e.length;for(d=0;g>d;d++)f+=("00"+e[d]).slice(-3);return a?b.formatFloat(f,c):a},type:"numeric"}),b.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\//.test(a)},format:function(b){return b?a.trim(b.replace(/(https?|ftp|file):\/\//,"")):b},type:"text"}),b.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(a)},format:function(a,c){return a?b.formatFloat(""!==a?new Date(a.replace(/-/g,"/")).getTime()||"":"",c):a},type:"numeric"}),b.addParser({id:"percent",is:function(a){return/(\d\s*?%|%\s*?\d)/.test(a)&&a.length<15},format:function(a,c){return a?b.formatFloat(a.replace(/%/g,""),c):a},type:"numeric"}),b.addParser({id:"usLongDate",is:function(a){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(a)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(a)},format:function(a,c){return a?b.formatFloat(new Date(a.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",c):a},type:"numeric"}),b.addParser({id:"shortDate",is:function(a){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((a||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(a,c,d,e){if(a){var f=c.config,g=f.headerList[e],h=g.dateFormat||b.getData(g,f.headers[e],"dateFormat")||f.dateFormat;a=a.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===h?a=a.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===h?a=a.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===h&&(a=a.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return a?b.formatFloat(new Date(a).getTime()||"",c):a},type:"numeric"}),b.addParser({id:"time",is:function(a){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(a)},format:function(a,c){return a?b.formatFloat(new Date("2000/01/01 "+a.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",c):a},type:"numeric"}),b.addParser({id:"metadata",is:function(){return!1},format:function(b,c,d){var e=c.config,f=e.parserMetadataName?e.parserMetadataName:"sortValue";return a(d).metadata()[f]},type:"numeric"}),b.addWidget({id:"zebra",priority:90,format:function(c,d,e){var f,g,h,i,j,k,l,m,n=new RegExp(d.cssChildRow,"i"),o=d.$tbodies;for(d.debug&&(k=new Date),l=0;l<o.length;l++)f=o.eq(l),m=f.children("tr").length,m>1&&(i=0,g=f.children("tr:visible"),g.each(function(){h=a(this),n.test(this.className)||i++,j=i%2===0,h.removeClass(e.zebra[j?1:0]).addClass(e.zebra[j?0:1])}));d.debug&&b.benchmark("Applying Zebra widget",k)},remove:function(b,c,d){var e,f,g=c.$tbodies,h=(d.zebra||["even","odd"]).join(" ");for(e=0;e<g.length;e++)f=a.tablesorter.processTbody(b,g.eq(e),!0),f.children().removeClass(h),a.tablesorter.processTbody(b,f,!1)}})}(jQuery),function(a){var b=a.tablesorter=a.tablesorter||{};b.themes={bootstrap:{table:"table table-bordered table-striped",header:"bootstrap-header",footerRow:"",footerCells:"",icons:"",sortNone:"bootstrap-icon-unsorted",sortAsc:"icon-chevron-up",sortDesc:"icon-chevron-down",active:"",hover:"",filterRow:"",even:"",odd:""},jui:{table:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-state-default",footerRow:"",footerCells:"",icons:"ui-icon",sortNone:"ui-icon-carat-2-n-s",sortAsc:"ui-icon-carat-1-n",sortDesc:"ui-icon-carat-1-s",active:"ui-state-active",hover:"ui-state-hover",filterRow:"",even:"ui-widget-content",odd:"ui-state-default"}},b.storage=function(b,c,d){var e,f,g=!1,h={},i=b.id||a(".tablesorter").index(a(b)),j=window.location.pathname;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","temp"),g=!0,window.localStorage.removeItem("_tmptest")}catch(k){}return a.parseJSON&&(g?h=a.parseJSON(localStorage[c]||"{}"):(f=document.cookie.split(/[;\s|=]/),e=a.inArray(c,f)+1,h=0!==e?a.parseJSON(f[e]||"{}"):{})),(d||""===d)&&window.JSON&&JSON.hasOwnProperty("stringify")?(h[j]||(h[j]={}),h[j][i]=d,g?localStorage[c]=JSON.stringify(h):(e=new Date,e.setTime(e.getTime()+31536e6),document.cookie=c+"="+JSON.stringify(h).replace(/\"/g,'"')+"; expires="+e.toGMTString()+"; path=/"),void 0):h&&h[j]?h[j][i]:{}},b.addHeaderResizeEvent=function(b,c,d){var e,f={timer:250},g=a.extend({},f,d),h=b.config,i=h.widgetOptions,j=function(){i.resize_flag=!0,e=[],h.$headers.each(function(){var b=a.data(this,"savedSizes"),c=this.offsetWidth,d=this.offsetHeight;(c!==b[0]||d!==b[1])&&(a.data(this,"savedSizes",[c,d]),e.push(this))}),e.length&&h.$table.trigger("resize",[e]),i.resize_flag=!1};return clearInterval(i.resize_timer),c?(i.resize_flag=!1,!1):(h.$headers.each(function(){a.data(this,"savedSizes",[this.offsetWidth,this.offsetHeight])}),void(i.resize_timer=setInterval(function(){i.resize_flag||j()},g.timer)))},b.addWidget({id:"uitheme",priority:10,options:{uitheme:"jui"},format:function(c,d,e){var f,g,h,i,j=b.themes,k=d.$table,l="default"!==d.theme?d.theme:e.uitheme||"jui",m=j[j[l]?l:j[e.uitheme]?e.uitheme:"jui"],n=d.$headers,o="tr."+(e.stickyHeaders||"tablesorter-stickyHeader"),p=m.sortNone+" "+m.sortDesc+" "+m.sortAsc;d.debug&&(f=new Date),k.hasClass("tablesorter-"+l)&&d.theme!==l&&c.hasInitialized||(""!==m.even&&(e.zebra[0]+=" "+m.even),""!==m.odd&&(e.zebra[1]+=" "+m.odd),j=k.removeClass(""===d.theme?"":"tablesorter-"+d.theme).addClass("tablesorter-"+l+" "+m.table).find("tfoot"),j.length&&j.find("tr").addClass(m.footerRow).children("th, td").addClass(m.footerCells),n.addClass(m.header).filter(":not(.sorter-false)").bind("mouseenter.tsuitheme mouseleave.tsuitheme",function(b){a(this)["mouseenter"===b.type?"addClass":"removeClass"](m.hover)}),n.find(".tablesorter-wrapper").length||n.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>'),d.cssIcon&&n.find("."+d.cssIcon).addClass(m.icons),k.hasClass("hasFilters")&&n.find(".tablesorter-filter-row").addClass(m.filterRow)),a.each(n,function(b){h=a(this),i=d.cssIcon?h.find("."+d.cssIcon):h,this.sortDisabled?(h.removeClass(p),i.removeClass(p+" tablesorter-icon "+m.icons)):(j=k.hasClass("hasStickyHeaders")?k.find(o).find("th").eq(b).add(h):h,g=h.hasClass(d.cssAsc)?m.sortAsc:h.hasClass(d.cssDesc)?m.sortDesc:h.hasClass(d.cssHeader)?m.sortNone:"",h[g===m.sortNone?"removeClass":"addClass"](m.active),i.removeClass(p).addClass(g))}),d.debug&&b.benchmark("Applying "+l+" theme",f)},remove:function(a,c,d){var e=c.$table,f="object"==typeof d.uitheme?"jui":d.uitheme||"jui",g="object"==typeof d.uitheme?d.uitheme:b.themes[b.themes.hasOwnProperty(f)?f:"jui"],h=e.children("thead").children(),i=g.sortNone+" "+g.sortDesc+" "+g.sortAsc;e.removeClass("tablesorter-"+f+" "+g.table).find(c.cssHeader).removeClass(g.header),h.unbind("mouseenter.tsuitheme mouseleave.tsuitheme").removeClass(g.hover+" "+i+" "+g.active).find(".tablesorter-filter-row").removeClass(g.filterRow),h.find(".tablesorter-icon").removeClass(g.icons)}}),b.addWidget({id:"columns",priority:30,options:{columns:["primary","secondary","tertiary"]},format:function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p=d.$table,q=d.$tbodies,r=d.sortList,s=r.length,t=d.widgetColumns&&d.widgetColumns.hasOwnProperty("css")?d.widgetColumns.css||t:e&&e.hasOwnProperty("columns")?e.columns||t:t;for(k=t.length-1,l=t.join(" "),d.debug&&(j=new Date),n=0;n<q.length;n++)f=b.processTbody(c,q.eq(n),!0),g=f.children("tr"),o=g.length,g.each(function(){if(i=a(this),"none"!==this.style.display&&(h=i.children().removeClass(l),r&&r[0]&&(h.eq(r[0][0]).addClass(t[0]),s>1)))for(m=1;s>m;m++)h.eq(r[m][0]).addClass(t[m]||t[k])}),b.processTbody(c,f,!1);if(g=e.columns_thead!==!1?"thead tr":"",e.columns_tfoot!==!1&&(g+=(""===g?"":",")+"tfoot tr"),g.length&&(i=p.find(g).children().removeClass(l),r&&r[0]&&(i.filter('[data-column="'+r[0][0]+'"]').addClass(t[0]),s>1)))for(m=1;s>m;m++)i.filter('[data-column="'+r[m][0]+'"]').addClass(t[m]||t[k]);d.debug&&b.benchmark("Applying Columns widget",j)},remove:function(c,d,e){var f,g,h=d.$tbodies,i=(e.columns||["primary","secondary","tertiary"]).join(" ");for(d.$headers.removeClass(i),d.$table.children("tfoot").children("tr").children("th, td").removeClass(i),f=0;f<h.length;f++)g=b.processTbody(c,h.eq(f),!0),g.children("tr").each(function(){a(this).children().removeClass(i)}),b.processTbody(c,g,!1)}}),b.addWidget({id:"filter",priority:50,options:{filter_childRows:!1,filter_columnFilters:!0,filter_cssFilter:"tablesorter-filter",filter_filteredRow:"filtered",filter_formatter:null,filter_functions:null,filter_hideFilters:!1,filter_ignoreCase:!0,filter_liveSearch:!0,filter_onlyAvail:"filter-onlyAvail",filter_reset:null,filter_searchDelay:300,filter_startsWith:!1,filter_useParsedData:!1,filter_serversideFiltering:!1,filter_defaultAttrib:"data-value",filter_regex:{regex:/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/,child:/tablesorter-childRow/,filtered:/filtered/,type:/undefined|number/,exact:/(^[\"|\'|=])|([\"|\'|=]$)/g,nondigit:/[^\w,. \-()]/g,operators:/[<>=]/g}},format:function(c,d,e){if(d.parsers&&!d.$table.hasClass("hasFilters")){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=b.formatFloat,C="",D=d.$headers,E=e.filter_cssFilter,F=d.$table.addClass("hasFilters"),G=F.find("tbody"),H=d.parsers.length,I=function(f){var g=a.isArray(f),h=g?f:b.getFilters(c),i=(h||[]).join("");return g&&b.setFilters(F,h),e.filter_hideFilters&&F.find(".tablesorter-filter-row").trigger(""===i?"mouseleave":"mouseenter"),C!==i||f===!1?(F.trigger("filterStart",[h]),d.showProcessing?void setTimeout(function(){return J(f,h,i),!1},30):(J(f,h,i),!1)):void 0},J=function(i,k,n){var o,p,q,r,s,w,x,z,A,E,I;for(d.debug&&(z=new Date),h=0;h<G.length;h++)if(!G.eq(h).hasClass(d.cssInfoBlock)){if(o=b.processTbody(c,G.eq(h),!0),p=o.children("tr:not(."+d.cssChildRow+")"),w=p.length,""===n||e.filter_serversideFiltering)o.children().show().removeClass(e.filter_filteredRow);else for(I=!0,s=F.data("lastSearch")||[],a.each(k,function(a,b){I=0===(b||"").indexOf(s[a]||"")&&I&&!/(\s+or\s+|\|)/g.test(b||"")}),I&&0===p.filter(":visible").length&&(I=!1),g=0;w>g;g++)if(s=p[g].className,!(e.filter_regex.child.test(s)||I&&e.filter_regex.filtered.test(s))){for(s=!0,r=p.eq(g).nextUntil("tr:not(."+d.cssChildRow+")"),v=r.length&&e.filter_childRows?r.text():"",v=e.filter_ignoreCase?v.toLocaleLowerCase():v,q=p.eq(g).children("td"),f=0;H>f;f++)if(k[f]){if(l=e.filter_useParsedData||y[f]?d.cache[h].normalized[g][f]:a.trim(q.eq(f).text()),m=!e.filter_regex.type.test(typeof l)&&e.filter_ignoreCase?l.toLocaleLowerCase():l,x=s,j=e.filter_ignoreCase?k[f].toLocaleLowerCase():k[f],e.filter_functions&&e.filter_functions[f])e.filter_functions[f]===!0?x=D.filter('[data-column="'+f+'"]:last').hasClass("filter-match")?m.search(j)>=0:k[f]===l:"function"==typeof e.filter_functions[f]?x=e.filter_functions[f](l,d.cache[h].normalized[g][f],k[f],f):"function"==typeof e.filter_functions[f][k[f]]&&(x=e.filter_functions[f][k[f]](l,d.cache[h].normalized[g][f],k[f],f));
else if(e.filter_regex.regex.test(j)){t=e.filter_regex.regex.exec(j);try{x=new RegExp(t[1],t[2]).test(m)}catch(J){x=!1}}else if(j.replace(e.filter_regex.exact,"")==m)x=!0;else if(/^\!/.test(j))j=j.replace("!",""),u=m.search(a.trim(j)),x=""===j?!0:!(e.filter_startsWith?0===u:u>=0);else if(/^[<>]=?/.test(j))u=B(j.replace(e.filter_regex.nondigit,"").replace(e.filter_regex.operators,""),c),(y[f]||"numeric"===d.parsers[f].type)&&(t=d.parsers[f].format(""+j.replace(e.filter_regex.operators,""),c,D.eq(f),f),u=""===t||isNaN(t)?u:t),t=!y[f]&&"numeric"!==d.parsers[f].type||isNaN(u)||!d.cache[h].normalized[g]?isNaN(m)?B(m.replace(e.filter_regex.nondigit,""),c):B(m,c):d.cache[h].normalized[g][f],/>/.test(j)&&(x=/>=/.test(j)?t>=u:t>u),/</.test(j)&&(x=/<=/.test(j)?u>=t:u>t),""===u&&(x=!0);else if(/\s+(AND|&&)\s+/g.test(k[f]))for(u=j.split(/(?:\s+(?:and|&&)\s+)/g),x=m.search(a.trim(u[0]))>=0,A=u.length-1;x&&A;)x=x&&m.search(a.trim(u[A]))>=0,A--;else/\s+(-|to)\s+/.test(j)?(u=j.split(/(?: - | to )/),A=B(u[0].replace(e.filter_regex.nondigit,""),c),E=B(u[1].replace(e.filter_regex.nondigit,""),c),(y[f]||"numeric"===d.parsers[f].type)&&(t=d.parsers[f].format(""+u[0],c,D.eq(f),f),A=""===t||isNaN(t)?A:t,t=d.parsers[f].format(""+u[1],c,D.eq(f),f),E=""===t||isNaN(t)?E:t),t=!y[f]&&"numeric"!==d.parsers[f].type||isNaN(A)||isNaN(E)?isNaN(m)?B(m.replace(e.filter_regex.nondigit,""),c):B(m,c):d.cache[h].normalized[g][f],A>E&&(x=A,A=E,E=x),x=t>=A&&E>=t||""===A||""===E?!0:!1):/[\?|\*]/.test(j)||/\s+OR\s+/.test(k[f])?(u=j.replace(/\s+OR\s+/gi,"|"),!D.filter('[data-column="'+f+'"]:last').hasClass("filter-match")&&/\|/.test(u)&&(u="^("+u+")$"),x=new RegExp(u.replace(/\?/g,"\\S{1}").replace(/\*/g,"\\S*")).test(m)):(l=(m+v).indexOf(j),x=!e.filter_startsWith&&l>=0||e.filter_startsWith&&0===l);s=x&&s?!0:!1}p[g].style.display=s?"":"none",p.eq(g)[s?"removeClass":"addClass"](e.filter_filteredRow),r.length&&r[s?"show":"hide"]()}b.processTbody(c,o,!1)}C=n,F.data("lastSearch",k),d.debug&&b.benchmark("Completed filter widget search",z),F.trigger("applyWidgets"),F.trigger("filterEnd")},K=function(f,j,k){var l,m,n,o=[];for(f=parseInt(f,10),m=D.filter('[data-column="'+f+'"]:last'),l='<option value="">'+(m.data("placeholder")||m.attr("data-placeholder")||"")+"</option>",h=0;h<G.length;h++)for(i=d.cache[h].row.length,g=0;i>g;g++)k&&d.cache[h].row[g][0].className.match(e.filter_filteredRow)||(e.filter_useParsedData?o.push(""+d.cache[h].normalized[g][f]):(m=d.cache[h].row[g][0].cells[f],m&&o.push(a.trim(d.supportsTextContent?m.textContent:a(m).text()))));for(o=a.grep(o,function(b,c){return a.inArray(b,o)===c}),o=o.sort(b.sortText?function(a,d){return b.sortText(c,a,d,f)}:!0),n=F.find("thead").find("select."+E+'[data-column="'+f+'"]').val(),h=0;h<o.length;h++)m=o[h].replace(/\"/g,"&quot;"),l+=""!==o[h]?'<option value="'+m+'"'+(n===m?' selected="selected"':"")+">"+o[h]+"</option>":"";F.find("thead").find("select."+E+'[data-column="'+f+'"]')[j?"html":"append"](l)},L=function(a){for(f=0;H>f;f++)v=D.filter('[data-column="'+f+'"]:last'),(v.hasClass("filter-select")||e.filter_functions&&e.filter_functions[f]===!0)&&!v.hasClass("filter-false")&&(e.filter_functions||(e.filter_functions={}),e.filter_functions[f]=!0,K(f,a,v.hasClass(e.filter_onlyAvail)))},M=function(a){"undefined"==typeof a||a===!0?(clearTimeout(A),A=setTimeout(function(){I(a)},e.filter_liveSearch?e.filter_searchDelay:10)):I(a)};if(d.debug&&(z=new Date),e.filter_regex.child=new RegExp(d.cssChildRow),e.filter_regex.filtered=new RegExp(e.filter_filteredRow),e.filter_columnFilters!==!1&&D.filter(".filter-false").length!==D.length){for(v='<tr class="tablesorter-filter-row">',f=0;H>f;f++)v+="<td></td>";for(d.$filters=a(v+="</tr>").appendTo(F.find("thead").eq(0)).find("td"),f=0;H>f;f++)w=!1,s=D.filter('[data-column="'+f+'"]:last'),o=e.filter_functions&&e.filter_functions[f]&&"function"!=typeof e.filter_functions[f]||s.hasClass("filter-select"),w=b.getData?"false"===b.getData(s[0],d.headers[f],"filter"):d.headers[f]&&d.headers[f].hasOwnProperty("filter")&&d.headers[f].filter===!1||s.hasClass("filter-false"),o?v=a("<select>").appendTo(d.$filters.eq(f)):(e.filter_formatter&&a.isFunction(e.filter_formatter[f])?(v=e.filter_formatter[f](d.$filters.eq(f),f),v&&0===v.length&&(v=d.$filters.eq(f).children("input")),v&&(0===v.parent().length||v.parent().length&&v.parent()[0]!==d.$filters[f])&&d.$filters.eq(f).append(v)):v=a('<input type="search">').appendTo(d.$filters.eq(f)),v&&v.attr("placeholder",s.data("placeholder")||s.attr("data-placeholder")||"")),v&&(v.addClass(E).attr("data-column",f),w&&(v.addClass("disabled")[0].disabled=!0))}if(F.bind("addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search ".split(" ").join(".tsfilter "),function(a,b){return/(search|filterReset|filterEnd)/.test(a.type)||(a.stopPropagation(),L(!0)),"filterReset"===a.type&&F.find("."+E).val(""),"filterEnd"===a.type?L(!0):(b="search"===a.type?b:"updateComplete"===a.type?F.data("lastSearch"):"",M(b)),!1}).find("input."+E).bind("keyup search",function(a,b){if(27===a.which)this.value="";else if("number"==typeof e.filter_liveSearch&&this.value.length<e.filter_liveSearch&&""!==this.value||"keyup"===a.type&&(a.which<32&&8!==a.which&&e.filter_liveSearch===!0&&13!==a.which||a.which>=37&&a.which<=40||13!==a.which&&e.filter_liveSearch===!1))return;M(b)}),y=D.map(function(c){return b.getData?"parsed"===b.getData(D.filter('[data-column="'+c+'"]:last'),d.headers[c],"filter"):a(this).hasClass("filter-parsed")}).get(),e.filter_reset&&a(e.filter_reset).length&&a(e.filter_reset).bind("click.tsfilter",function(){F.trigger("filterReset")}),e.filter_functions)for(x in e.filter_functions)if(e.filter_functions.hasOwnProperty(x)&&"string"==typeof x)if(v=D.filter('[data-column="'+x+'"]:last'),k="",e.filter_functions[x]!==!0||v.hasClass("filter-false")){if("string"==typeof x&&!v.hasClass("filter-false")){for(p in e.filter_functions[x])"string"==typeof p&&(k+=""===k?'<option value="">'+(v.data("placeholder")||v.attr("data-placeholder")||"")+"</option>":"",k+='<option value="'+p+'">'+p+"</option>");F.find("thead").find("select."+E+'[data-column="'+x+'"]').append(k)}}else K(x);L(!0),F.find("select."+E).bind("change search",function(a,b){I(b)}),e.filter_hideFilters&&F.find(".tablesorter-filter-row").addClass("hideme").bind("mouseenter mouseleave",function(b){var c,d=b;q=a(this),clearTimeout(n),n=setTimeout(function(){/enter|over/.test(d.type)?q.removeClass("hideme"):a(document.activeElement).closest("tr")[0]!==q[0]&&(c=F.find("."+e.filter_cssFilter).map(function(){return a(this).val()||""}).get().join(""),""===c&&q.addClass("hideme"))},200)}).find("input, select").bind("focus blur",function(b){r=a(this).closest("tr"),clearTimeout(n),n=setTimeout(function(){""===F.find("."+e.filter_cssFilter).map(function(){return a(this).val()||""}).get().join("")&&r["focus"===b.type?"removeClass":"addClass"]("hideme")},200)}),d.showProcessing&&F.bind("filterStart.tsfilter filterEnd.tsfilter",function(c,e){var f=e?F.find("."+d.cssHeader).filter("[data-column]").filter(function(){return""!==e[a(this).data("column")]}):"";b.isProcessing(F[0],"filterStart"===c.type,e?f:"")}),d.debug&&b.benchmark("Applying Filter widget",z),F.bind("tablesorter-initialized",function(){for(k=b.getFilters(c),f=0;f<k.length;f++)k[f]=D.filter('[data-column="'+f+'"]:last').attr(e.filter_defaultAttrib)||k[f];b.setFilters(c,k,!0)}),F.trigger("filterInit"),I()}},remove:function(c,d,e){var f,g,h=d.$table,i=d.$tbodies;for(h.removeClass("hasFilters").unbind("addRows updateCell update updateComplete appendCache search filterStart filterEnd ".split(" ").join(".tsfilter ")).find(".tablesorter-filter-row").remove(),f=0;f<i.length;f++)g=b.processTbody(c,i.eq(f),!0),g.children().removeClass(e.filter_filteredRow).show(),b.processTbody(c,g,!1);e.filterreset&&a(e.filter_reset).unbind("click.tsfilter")}}),b.getFilters=function(b){var c=b?a(b)[0].config:{};return c&&c.widgetOptions&&!c.widgetOptions.filter_columnFilters?a(b).data("lastSearch"):c&&c.$filters?c.$filters.find("."+c.widgetOptions.filter_cssFilter).map(function(b,c){return a(c).val()}).get()||[]:!1},b.setFilters=function(b,c,d){var e=a(b),f=e.length?e[0].config:{},g=f&&f.$filters?f.$filters.find("."+f.widgetOptions.filter_cssFilter).each(function(b,d){a(d).val(c[b]||"")}).trigger("change.tsfilter")||!1:!1;return d&&e.trigger("search",[c,!1]),!!g},b.addWidget({id:"stickyHeaders",priority:60,options:{stickyHeaders:"tablesorter-stickyHeader",stickyHeaders_offset:0,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:!0,stickyHeaders_includeCaption:!0,stickyHeaders_zIndex:2},format:function(c,d,e){if(!d.$table.hasClass("hasStickyHeaders")){var f,g=d.$table,h=a(window),i=g.children("thead:first"),j=i.children("tr:not(.sticky-false)").children(),k=".tablesorter-header-inner",l=g.find("tfoot"),m="."+(e.filter_cssFilter||"tablesorter-filter"),n=isNaN(e.stickyHeaders_offset)?a(e.stickyHeaders_offset):"",o=n.length?n.height()||0:parseInt(e.stickyHeaders_offset,10)||0,p=e.stickyHeaders_zIndex?e.stickyHeaders_zIndex:2,q=e.$sticky=g.clone().addClass("containsStickyHeaders").css({position:"fixed",margin:0,top:o,visibility:"hidden",zIndex:p}),r=q.children("thead:first").addClass(e.stickyHeaders),s="",t=0,u=!1,v=function(){o=n.length?n.height()||0:parseInt(e.stickyHeaders_offset,10)||0;var b=navigator.userAgent;t=0,"collapse"===g.css("border-collapse")||/(webkit|msie)/i.test(b)||(t=2*parseInt(j.eq(0).css("border-left-width"),10)),q.css({left:i.offset().left-h.scrollLeft()-t,width:g.width()}),f.filter(":visible").each(function(b){var c=j.filter(":visible").eq(b);a(this).css({width:c.width()-t,height:c.height()}).find(k).width(c.find(k).width())})};q.attr("id")&&(q[0].id+=e.stickyHeaders_cloneId),q.find("thead:gt(0), tr.sticky-false, tbody, tfoot").remove(),e.stickyHeaders_includeCaption||q.find("caption").remove(),f=r.children().children(),q.css({height:0,width:0,padding:0,margin:0,border:0}),f.find(".tablesorter-resizer").remove(),g.addClass("hasStickyHeaders").bind("sortEnd.tsSticky",function(){j.filter(":visible").each(function(b){var c=f.filter(":visible").eq(b);c.attr("class",a(this).attr("class")).removeClass(d.cssProcessing),d.cssIcon&&c.find("."+d.cssIcon).attr("class",a(this).find("."+d.cssIcon).attr("class"))})}).bind("pagerComplete.tsSticky",function(){v()}),j.find(d.selectorSort).add(d.$headers.filter(d.selectorSort)).each(function(b){var c=a(this),e=r.children("tr.tablesorter-headerRow").children().eq(b).bind("mouseup",function(a){c.trigger(a,!0)});d.cancelSelection&&e.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})}),g.after(q),h.bind("scroll.tsSticky resize.tsSticky",function(a){if(g.is(":visible")){var b="tablesorter-sticky-",c=g.offset(),d=e.stickyHeaders_includeCaption?0:g.find("caption").outerHeight(!0),f=h.scrollTop()+o-d,j=g.height()-(q.height()+(l.height()||0)),k=f>c.top&&f<c.top+j?"visible":"hidden";q.removeClass(b+"visible "+b+"hidden").addClass(b+k).css({left:i.offset().left-h.scrollLeft()-t,visibility:k}),(k!==s||"resize"===a.type)&&(v(),s=k)}}),e.stickyHeaders_addResizeEvent&&b.addHeaderResizeEvent(c),g.bind("filterEnd",function(){u||r.find(".tablesorter-filter-row").children().each(function(b){a(this).find(m).val(d.$filters.find(m).eq(b).val())})}),f.find(m).bind("keyup search change",function(b){if(!(b.which<32&&8!==b.which||b.which>=37&&b.which<=40)){u=!0;var c=a(this),f=c.attr("data-column");d.$filters.find(m).eq(f).val(c.val()).trigger("search"),setTimeout(function(){u=!1},e.filter_searchDelay)}}),g.trigger("stickyHeadersInit")}},remove:function(c,d,e){d.$table.removeClass("hasStickyHeaders").unbind("sortEnd.tsSticky pagerComplete.tsSticky").find("."+e.stickyHeaders).remove(),e.$sticky&&e.$sticky.length&&e.$sticky.remove(),a(".hasStickyHeaders").length||a(window).unbind("scroll.tsSticky resize.tsSticky"),b.addHeaderResizeEvent(c,!1)}}),b.addWidget({id:"resizable",priority:40,options:{resizable:!0,resizable_addLastColumn:!1},format:function(c,d,e){if(!d.$table.hasClass("hasResizable")){d.$table.addClass("hasResizable");var f,g,h,i,j,k,l,m,n={},o=d.$table,p=0,q=null,r=null,s=Math.abs(o.parent().width()-o.width())<20,t=function(){b.storage&&q&&(n[q.index()]=q.width(),n[r.index()]=r.width(),q.width(n[q.index()]),r.width(n[r.index()]),e.resizable!==!1&&b.storage(c,"tablesorter-resizable",n)),p=0,q=r=null,a(window).trigger("resize")};if(n=b.storage&&e.resizable!==!1?b.storage(c,"tablesorter-resizable"):{})for(i in n)!isNaN(i)&&i<d.$headers.length&&d.$headers.eq(i).width(n[i]);f=o.children("thead:first").children("tr"),f.children().each(function(){g=a(this),h=g.attr("data-column"),i="false"===b.getData(g,d.headers[h],"resizable"),f.children().filter('[data-column="'+h+'"]').toggleClass("resizable-false",i)}),f.each(function(){j=a(this).children(":not(.resizable-false)"),a(this).find(".tablesorter-wrapper").length||j.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>'),e.resizable_addLastColumn||(j=j.slice(0,-1)),k=k?k.add(j):j}),k.each(function(){f=a(this),i=parseInt(f.css("padding-right"),10)+10,g='<div class="tablesorter-resizer" style="cursor:w-resize;position:absolute;z-index:1;right:-'+i+'px;top:0;height:100%;width:20px;"></div>',f.find(".tablesorter-wrapper").append(g)}).bind("mousemove.tsresize",function(a){0!==p&&q&&(l=a.pageX-p,m=q.width(),q.width(m+l),q.width()!==m&&s&&r.width(r.width()-l),p=a.pageX)}).bind("mouseup.tsresize",function(){t()}).find(".tablesorter-resizer,.tablesorter-resizer-grip").bind("mousedown",function(b){q=a(b.target).closest("th"),g=d.$headers.filter('[data-column="'+q.attr("data-column")+'"]'),g.length>1&&(q=q.add(g)),r=b.shiftKey?q.parent().find("th:not(.resizable-false)").filter(":last"):q.nextAll(":not(.resizable-false)").eq(0),p=b.pageX}),o.find("thead:first").bind("mouseup.tsresize mouseleave.tsresize",function(){t()}).bind("contextmenu.tsresize",function(){b.resizableReset(c);var d=a.isEmptyObject?a.isEmptyObject(n):n==={};return n={},d})}},remove:function(a,c){c.$table.removeClass("hasResizable").find("thead").unbind("mouseup.tsresize mouseleave.tsresize contextmenu.tsresize").find("tr").children().unbind("mousemove.tsresize mouseup.tsresize").find(".tablesorter-resizer,.tablesorter-resizer-grip").remove(),b.resizableReset(a)}}),b.resizableReset=function(a){a.config.$headers.filter(":not(.resizable-false)").css("width",""),b.storage&&b.storage(a,"tablesorter-resizable",{})},b.addWidget({id:"saveSort",priority:20,options:{saveSort:!0},init:function(a,b,c,d){b.format(a,c,d,!0)},format:function(c,d,e,f){var g,h,i=d.$table,j=e.saveSort!==!1,k={sortList:d.sortList};d.debug&&(h=new Date),i.hasClass("hasSaveSort")?j&&c.hasInitialized&&b.storage&&(b.storage(c,"tablesorter-savesort",k),d.debug&&b.benchmark("saveSort widget: Saving last sort: "+d.sortList,h)):(i.addClass("hasSaveSort"),k="",b.storage&&(g=b.storage(c,"tablesorter-savesort"),k=g&&g.hasOwnProperty("sortList")&&a.isArray(g.sortList)?g.sortList:"",d.debug&&b.benchmark('saveSort: Last sort loaded: "'+k+'"',h),i.bind("saveSortReset",function(a){a.stopPropagation(),b.storage(c,"tablesorter-savesort","")})),f&&k&&k.length>0?d.sortList=k:c.hasInitialized&&k&&k.length>0&&i.trigger("sorton",[k]))},remove:function(a){b.storage&&b.storage(a,"tablesorter-savesort","")}})}(jQuery),+function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)
},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a){return function(){return this[a].apply(this,arguments)}}function f(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function g(b){var c={};if(o[b]||(b=b.split("-")[0],o[b])){var d=o[b];return a.each(n,function(a,b){b in d&&(c[b]=d[b])}),c}}var h=a(window),i=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.splice(0)},copy:function(){var a=new i;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),j=function(b,c){this.dates=new i,this.viewDate=d(),this.focusDate=null,this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(p.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};j.prototype={constructor:j,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(o[d]||(d=d.split("-")[0],o[d]||(d=m.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.multidate!==!0&&(c.multidate=Number(c.multidate)||!1,c.multidate=c.multidate!==!1?Math.max(0,c.multidate):1),c.multidateSeparator=String(c.multidateSeparator),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=p.parseFormat(c.format);c.startDate!==-1/0&&(c.startDate=c.startDate?c.startDate instanceof Date?this._local_to_utc(this._zero_time(c.startDate)):p.parseDate(c.startDate,e,c.language):-1/0),1/0!==c.endDate&&(c.endDate=c.endDate?c.endDate instanceof Date?this._local_to_utc(this._zero_time(c.endDate)):p.parseDate(c.endDate,e,c.language):1/0),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)});var f=String(c.orientation).toLowerCase().split(/\s+/g),g=c.orientation.toLowerCase();if(f=a.grep(f,function(a){return/^auto|left|right|top|bottom$/.test(a)}),c.orientation={x:"auto",y:"auto"},g&&"auto"!==g)if(1===f.length)switch(f[0]){case"top":case"bottom":c.orientation.y=f[0];break;case"left":case"right":c.orientation.x=f[0]}else g=a.grep(f,function(a){return/^left|right$/.test(a)}),c.orientation.x=g[0]||"auto",g=a.grep(f,function(a){return/^top|bottom$/.test(a)}),c.orientation.y=g[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return p.formatDate(c,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:e("setDates"),setUTCDate:e("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return p.formatDate(a,c,d)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=h.width(),f=h.height(),g=h.scrollTop(),i=parseInt(this.element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"))+10,j=this.component?this.component.parent().offset():this.element.offset(),k=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),m=j.left,n=j.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(m-=b-l)):(this.picker.addClass("datepicker-orient-left"),j.left<0?m-=j.left-d:j.left+b>e&&(m=e-b-d));var o,p,q=this.o.orientation.y;"auto"===q&&(o=-g+j.top-c,p=g+f-(j.top+k+c),q=Math.max(o,p)===p?"top":"bottom"),this.picker.addClass("datepicker-orient-"+q),"top"===q?n+=k:n-=c+parseInt(this.picker.css("padding-top")),this.picker.css({top:n,left:m,zIndex:i})}},_allow_update:!0,update:function(){if(this._allow_update){var b=this.dates.copy(),c=[],d=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return p.parseDate(a,this.o.format,this.o.language)},this)),c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+o[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+o[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var d,e=new Date(this.viewDate),f=e.getUTCFullYear(),g=e.getUTCMonth(),h=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,i=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,j=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,k=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,l=o[this.o.language].today||o.en.today||"",m=o[this.o.language].clear||o.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(o[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(m).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=c(f,g-1,28),q=p.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(q),n.setUTCDate(q-(n.getUTCDay()-this.o.weekStart+7)%7);var r=new Date(n);r.setUTCDate(r.getUTCDate()+42),r=r.valueOf();for(var s,t=[];n.valueOf()<r;){if(n.getUTCDay()===this.o.weekStart&&(t.push("<tr>"),this.o.calendarWeeks)){var u=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),v=new Date(Number(u)+(11-u.getUTCDay())%7*864e5),w=new Date(Number(w=c(v.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),x=(v-w)/864e5/7+1;t.push('<td class="cw">'+x+"</td>")}if(s=this.getClassNames(n),s.push("day"),this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"==typeof y?y={enabled:y}:"string"==typeof y&&(y={classes:y}),y.enabled===!1&&s.push("disabled"),y.classes&&(s=s.concat(y.classes.split(/\s+/))),y.tooltip&&(d=y.tooltip)}s=a.unique(s),t.push('<td class="'+s.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+n.getUTCDate()+"</td>"),n.getUTCDay()===this.o.weekEnd&&t.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(t.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===f&&z.eq(b.getUTCMonth()).addClass("active")}),(h>f||f>j)&&z.addClass("disabled"),f===h&&z.slice(0,i).addClass("disabled"),f===j&&z.slice(k+1).addClass("disabled"),t="",f=10*parseInt(f/10,10);var A=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var B,C=a.map(this.dates,function(a){return a.getUTCFullYear()}),D=-1;11>D;D++)B=["year"],-1===D?B.push("old"):10===D&&B.push("new"),-1!==a.inArray(f,C)&&B.push("active"),(h>f||f>j)&&B.push("disabled"),t+='<span class="'+B.join(" ")+'">'+f+"</span>",f+=1;A.html(t)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(b){b.preventDefault();var d,e,f,g=a(b.target).closest("span, td, th");if(1===g.length)switch(g[0].nodeName.toLowerCase()){case"th":switch(g[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=p.modes[this.viewMode].navStep*("prev"===g[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var i=new Date;i=c(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),this.showMode(-2);var j="linked"===this.o.todayBtn?null:"view";this._setDate(i,j);break;case"clear":var k;this.isInput?k=this.element:this.component&&(k=this.element.find("input")),k&&k.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":g.is(".disabled")||(this.viewDate.setUTCDate(1),g.is(".month")?(f=1,e=g.parent().find("span").index(g),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(g.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":g.is(".day")&&!g.is(".disabled")&&(f=parseInt(g.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g.is(".old")?0===e?(e=11,d-=1):e-=1:g.is(".new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a?-1!==b?this.dates.remove(b):this.dates.push(a):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d,e,f=new Date(a.valueOf()),g=f.getUTCDate(),h=f.getUTCMonth(),i=Math.abs(c);if(c=c>0?1:-1,1===i)e=-1===c?function(){return f.getUTCMonth()===h}:function(){return f.getUTCMonth()!==d},d=h+c,f.setUTCMonth(d),(0>d||d>11)&&(d=(d+12)%12);else{for(var j=0;i>j;j++)f=this.moveMonth(f,c);d=f.getUTCMonth(),f.setUTCDate(g),e=function(){return d!==f.getUTCMonth()}}for(;e();)f.setUTCDate(--g),f.setUTCMonth(d);return f},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27===a.keyCode&&this.show());var b,c,e,f=!1,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+b),e=new Date(g),e.setUTCDate(g.getUTCDate()+b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+7*b),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(g),f=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(f){this._trigger(this.dates.length?"changeDate":"clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var k=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var l=a.fn.datepicker;a.fn.datepicker=function(c){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var h=a(this),i=h.data("datepicker"),l="object"==typeof c&&c;if(!i){var n=f(this,"date"),o=a.extend({},m,n,l),p=g(o.language),q=a.extend({},m,p,n,l);if(h.is(".input-daterange")||q.inputs){var r={inputs:q.inputs||h.find("input").toArray()};h.data("datepicker",i=new k(this,a.extend(q,r)))}else h.data("datepicker",i=new j(this,q))}return"string"==typeof c&&"function"==typeof i[c]&&(e=i[c].apply(i,d),e!==b)?!1:void 0}),e!==b?e:this};var m=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},n=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=j;var o=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){function g(){var a=this.slice(0,m[k].length),b=m[k].slice(0,a.length);return a===b}if(!d)return b;if(d instanceof Date)return d;"string"==typeof e&&(e=p.parseFormat(e));var h,i,k,l=/([\-+]\d+)([dmwy])/,m=d.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){for(d=new Date,k=0;k<m.length;k++)switch(h=l.exec(m[k]),i=parseInt(h[1]),h[2]){case"d":d.setUTCDate(d.getUTCDate()+i);break;case"m":d=j.prototype.moveMonth.call(j.prototype,d,i);break;case"w":d.setUTCDate(d.getUTCDate()+7*i);break;case"y":d=j.prototype.moveYear.call(j.prototype,d,i)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)
}m=d&&d.match(this.nonpunctuation)||[],d=new Date;var n,q,r={},s=["yyyy","yy","M","MM","m","mm","d","dd"],t={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};t.M=t.MM=t.mm=t.m,t.dd=t.d,d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var u=e.parts.slice();if(m.length!==u.length&&(u=a(u).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray()),m.length===u.length){var v;for(k=0,v=u.length;v>k;k++){if(n=parseInt(m[k],10),h=u[k],isNaN(n))switch(h){case"MM":q=a(o[f].months).filter(g),n=a.inArray(q[0],o[f].months)+1;break;case"M":q=a(o[f].monthsShort).filter(g),n=a.inArray(q[0],o[f].monthsShort)+1}r[h]=n}var w,x;for(k=0;k<s.length;k++)x=s[k],x in r&&!isNaN(r[x])&&(w=new Date(d),t[x](w,r[x]),isNaN(w)||(d=w))}return d},formatDate:function(b,c,d){if(!b)return"";"string"==typeof c&&(c=p.parseFormat(c));var e={d:b.getUTCDate(),D:o[d].daysShort[b.getUTCDay()],DD:o[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:o[d].monthsShort[b.getUTCMonth()],MM:o[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=p,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);var Handlebars={};!function(a,b){a.VERSION="1.0.0",a.COMPILER_REVISION=4,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw new Error("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,e){var f,g=e.fn,h=e.inverse,i=0,j="",k=c.call(b);if(k===d&&(b=b.call(this)),e.data&&(f=a.createFrame(e.data)),b&&"object"==typeof b)if(b instanceof Array)for(var l=b.length;l>i;i++)f&&(f.index=i),j+=g(b[i],{data:f});else for(var m in b)b.hasOwnProperty(m)&&(f&&(f.key=m),j+=g(b[m],{data:f}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),a.Utils.isEmpty(b)?void 0:e.fn(b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;b<f.length;b++)this[f[b]]=a[f[b]]},a.Exception.prototype=new Error,a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return this.string.toString()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,i=/[&<>"'`]/,j=function(a){return g[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?b.toString():null==b||b===!1?"":(b=b.toString(),i.test(b)?b.replace(h,j):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},merge:function(b,c){var d=b||c;return b&&c&&(d={},a.Utils.extend(d,c),a.Utils.extend(d,b)),d},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(a.compile)return g[d]=a.compile(c,{data:h!==b}),g[d](e,i);throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}},a.template=a.VM.template}(Handlebars),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.home_character=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,j="";return j+="\n    ",d=c["if"].call(a,(d=a&&a.profile,null==d||d===!1?d:d.HOME_SHOW_SEPARATORS),{hash:{},inverse:u.noop,fn:u.program(2,g,b),data:b}),(d||0===d)&&(j+=d),j+='\n    <div class="sensitive character-location',d=c.unless.call(a,(d=a&&a.profile,null==d||d===!1?d:d.HOME_SHOW_SEPARATORS),{hash:{},inverse:u.noop,fn:u.program(4,h,b),data:b}),(d||0===d)&&(j+=d),j+='">\n      <span class="location-hover" rel="tooltip" title="'+t((e=c.systems_details||a&&a.systems_details,f={hash:{},data:b},e?e.call(a,(d=a&&a.character,d=null==d||d===!1?d:d.details,null==d||d===!1?d:d.last_known_location),f):s.call(a,"systems_details",(d=a&&a.character,d=null==d||d===!1?d:d.details,null==d||d===!1?d:d.last_known_location),f)))+'">'+t((d=a&&a.character,d=null==d||d===!1?d:d.details,d=null==d||d===!1?d:d.last_known_location,typeof d===v?d.apply(a):d))+"</span>\n      ",d=c["if"].call(a,(d=a&&a.character,d=null==d||d===!1?d:d.details,null==d||d===!1?d:d.ship_item_id),{hash:{},inverse:u.noop,fn:u.program(6,i,b),data:b}),(d||0===d)&&(j+=d),j+="\n    </div>\n    "}function g(){return"<hr>"}function h(){return" margin-half-top"}function i(a,b){var d,e,f,g="";return g+="\n      -- "+t((e=c.lookup||a&&a.lookup,f={hash:{},data:b},e?e.call(a,a&&a.ships,(d=a&&a.character,d=null==d||d===!1?d:d.details,null==d||d===!1?d:d.ship_item_id),f):s.call(a,"lookup",a&&a.ships,(d=a&&a.character,d=null==d||d===!1?d:d.details,null==d||d===!1?d:d.ship_item_id),f)))+"\n      "}function j(a,b){var d,e,f,h="";return h+="\n    ",d=c["if"].call(a,(d=a&&a.profile,null==d||d===!1?d:d.HOME_SHOW_SEPARATORS),{hash:{},inverse:u.noop,fn:u.program(2,g,b),data:b}),(d||0===d)&&(h+=d),h+="\n    <div",d=c.unless.call(a,(d=a&&a.profile,null==d||d===!1?d:d.HOME_SHOW_SEPARATORS),{hash:{},inverse:u.noop,fn:u.program(9,k,b),data:b}),(d||0===d)&&(h+=d),h+='>\n      <span class="skill-hover" rel="popover" title="'+t((d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.skill,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+'" data-content="',d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.skill,d=null==d||d===!1?d:d.html,d=typeof d===v?d.apply(a):d,(d||0===d)&&(h+=d),h+='">'+t((d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.skill,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+" ",d=c["if"].call(a,(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.to_level),{hash:{},inverse:u.noop,fn:u.program(11,l,b),data:b}),(d||0===d)&&(h+=d),h+='</span>\n      <span class="small">(Rank '+t((d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.skill,d=null==d||d===!1?d:d.rank,typeof d===v?d.apply(a):d))+')</span>\n      <br>\n      <em class="small skillduration">'+t((e=c.shortduration||a&&a.shortduration,f={hash:{},data:b},e?e.call(a,(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.duration),f):s.call(a,"shortduration",(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.duration),f)))+" @ "+t((e=c.comma||a&&a.comma,f={hash:{},data:b},e?e.call(a,(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.sp_per_hour),f):s.call(a,"comma",(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.sp_per_hour),f)))+' SP/hr</em>\n      <em class="small pull-right queueduration">Queue: '+t((e=c.shortduration||a&&a.shortduration,f={hash:{},data:b},e?e.call(a,(d=a&&a.character,null==d||d===!1?d:d.skill_queue_duration),f):s.call(a,"shortduration",(d=a&&a.character,null==d||d===!1?d:d.skill_queue_duration),f)))+'</em>\n      <div class="progress',d=c["if"].call(a,(d=a&&a.character,null==d||d===!1?d:d.skill_queue_low),{hash:{},inverse:u.noop,fn:u.program(13,m,b),data:b}),(d||0===d)&&(h+=d),h+='">\n        <div class="bar" style="width: '+t((d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.complete_percent,typeof d===v?d.apply(a):d))+'%">'+t((d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],d=null==d||d===!1?d:d.complete_percent,typeof d===v?d.apply(a):d))+"%</div>\n      </div>\n    </div>\n    "}function k(){return' class="margin-half-top"'}function l(a,b){var d,e,f;return t((e=c.roman||a&&a.roman,f={hash:{},data:b},e?e.call(a,(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.to_level),f):s.call(a,"roman",(d=a&&a.character,d=null==d||d===!1?d:d.skill_queue,d=null==d||d===!1?d:d[0],null==d||d===!1?d:d.to_level),f)))}function m(){return" progress-danger"}function n(){return'<hr class="home-notifications hide">'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var o,p,q,r="",s=c.helperMissing,t=this.escapeExpression,u=this,v="function";return r+='  <div class="well-small well home-character">\n    <div>\n      <span class="large">\n        <a href="character/'+t((o=b&&b.character,o=null==o||o===!1?o:o.name,typeof o===v?o.apply(b):o))+'" class="sensitive character-name" rel="tooltip" title="'+t((p=c.corp||b&&b.corp,q={hash:{},data:e},p?p.call(b,(o=b&&b.character,null==o||o===!1?o:o.corporation),q):s.call(b,"corp",(o=b&&b.character,null==o||o===!1?o:o.corporation),q)))+'">'+t((o=b&&b.character,o=null==o||o===!1?o:o.name,typeof o===v?o.apply(b):o))+'</a>\n      </span>\n      <span class="small pull-right sensitive apikey-name">['+t((o=b&&b.character,o=null==o||o===!1?o:o.apikey,o=null==o||o===!1?o:o.name,typeof o===v?o.apply(b):o))+"]</span>\n    </div>\n\n    <div>\n      <span>"+t((p=c.comma||b&&b.comma,q={hash:{},data:e},p?p.call(b,(o=b&&b.character,o=null==o||o===!1?o:o.details,null==o||o===!1?o:o.wallet_balance),q):s.call(b,"comma",(o=b&&b.character,o=null==o||o===!1?o:o.details,null==o||o===!1?o:o.wallet_balance),q)))+' ISK</span>\n      <span class="small pull-right total-sp">'+t((p=c.comma||b&&b.comma,q={hash:{},data:e},p?p.call(b,(o=b&&b.character,o=null==o||o===!1?o:o.details,null==o||o===!1?o:o.total_sp),q):s.call(b,"comma",(o=b&&b.character,o=null==o||o===!1?o:o.details,null==o||o===!1?o:o.total_sp),q)))+" SP</span>\n    </div>\n\n    ",o=c["if"].call(b,(o=b&&b.profile,null==o||o===!1?o:o.HOME_SHOW_LOCATIONS),{hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e}),(o||0===o)&&(r+=o),r+="\n\n    ",o=c["if"].call(b,(o=b&&b.character,null==o||o===!1?o:o.skill_queue),{hash:{},inverse:u.noop,fn:u.program(8,j,e),data:e}),(o||0===o)&&(r+=o),r+="\n    ",o=c["if"].call(b,(o=b&&b.profile,null==o||o===!1?o:o.HOME_SHOW_SEPARATORS),{hash:{},inverse:u.noop,fn:u.program(15,n,e),data:e}),(o||0===o)&&(r+=o),r+='\n    <ul class="home-notifications">\n        <li class="no-game-time hide"><i class="fa fa-clock-o" rel="tooltip" title="Game time has expired!"></i><span>Expired</span></li>\n        <li class="low-game-time hide"><i class="fa fa-clock-o" rel="tooltip" title="Remaining game time is low!"></i><span></span></li>\n        <li class="key-expiring hide"><i class="fa fa-key" rel="tooltip" title="API key is close to expiring!"></i></li>\n        <li class="empty-skill-queue hide"><i class="fa fa-list-ol" rel="tooltip" title="Skill queue is empty!"></i><span>Empty!</span></li>\n        <li class="low-skill-queue hide"><i class="fa fa-list-ol" rel="tooltip" title="Skill queue is not full!"></i><span></span></li>\n        <li class="implants hide"><i class="fa fa-lightbulb-o" rel="tooltip" title="Missing stat implants for currently training skill!"></i><span></span></li>\n        <li class="clone hide"><i class="fa fa-user" rel="tooltip" title="Insufficient clone!"></i><span></span></li>\n    </ul>\n  </div>\n'}),this.Handlebars.templates.mail_list=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="                  <tr",(g=c.rowClass)?f=g.call(b,{hash:{},data:e}):(g=b&&b.rowClass,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' data-message-id="',(g=c.message_id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.message_id,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">\n                    <td class="mail-checkbox"><input type="checkbox" name="message_',(g=c.message_id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.message_id,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"></td>\n                    <td class="mail-from">',(g=c.senderText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.senderText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</td>\n                    <td class="mail-to">',(g=c.toText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.toText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</td>\n                    <td><a class="mail-link" href="#',(g=c.message_id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.message_id,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">',(g=c.subjectText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.subjectText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</a></td>\n                    <td class="mail-date">',(g=c.sent_date)?f=g.call(b,{hash:{},data:e}):(g=b&&b.sent_date,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</td>\n                  </tr>\n"}),jQuery.ajaxSettings.traditional=!0;var EVEthing={util:{sorted_keys:function(a){var b=[];for(var c in a)b.push(c);return b.sort()},sorted_keys_by_value:function(a){var b=[];for(var c in a)b.push(c);return b.sort(function(b,c){return a[b]<a[c]?-1:a[b]>a[c]?1:0})}},misc:{setClock:function(){var a=new Date,b=a.getUTCHours();10>b&&(b="0"+b);var c=a.getUTCMinutes();10>c&&(c="0"+c),$("#utc-time").text(b+":"+c)},setup_tab_hash:function(){var a="tab_",b=document.location.hash;b&&$(".nav-tabs a[href="+b.replace("#","#"+a)+"]").tab("show"),$('a[data-toggle="tab"]').on("shown.bs.tab",function(b){window.location.hash=b.target.hash.replace("#"+a,"#")})}}};$(document).ready(function(){var a=window.location.pathname;$("#nav-list li a").each(function(){$(this).attr("href")==a&&$(this).parent().addClass("active")}),$("[rel=tooltip]").tooltip(),$(".dropdown-toggle").dropdown(),$(".skill-hover").popover({animation:!1,trigger:"hover",html:!0}),EVEthing.misc.setClock(),window.setInterval(EVEthing.misc.setClock,5e3)}),$.tablesorter.addParser({id:"human",is:function(a){return/^[0-9\,\.]+[KMB]?$/.test(a)},format:function(a){var a=a.replace(/\,/g,""),b=a.length-1,c=a.charAt(b);return"K"==c?1e3*a.substr(0,b):"M"==c?1e6*a.substr(0,b):"B"==c?1e9*a.substr(0,b):a},type:"numeric"}),$.extend($.tablesorter.themes.bootstrap,{icons:"",sortNone:"fa fa-sort",sortAsc:"fa fa-caret-up",sortDesc:"fa fa-caret-down"}),parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Handlebars.getTemplate=function(a){return(void 0===Handlebars.templates||void 0===Handlebars.templates[a])&&$.ajax({url:"/static/handlebars/"+a+".handlebars",success:function(b){void 0===Handlebars.templates&&(Handlebars.templates={}),Handlebars.templates[a]=Handlebars.compile(b)},async:!1}),Handlebars.templates[a]},EVEthing.account={savedTD:null,savedHTML:null,masks:{2:"AssetList",8:"CharacterSheet",128:"IndustryJobs",4096:"MarketOrders",262144:"SkillQueue",524288:"Standings",2097152:"WalletJournal",4194304:"WalletTransactions",33554432:"AccountStatus",67108864:"Contracts",134217728:"Locations"},onload:function(){EVEthing.misc.setup_tab_hash(),$("#key-table").on("click",".js-edit-name, .js-edit-group-name",function(){var a=[];$("#key-table form").remove();var b=$(this).parents("tr").attr("data-id"),c=$(this).parent().text();if(EVEthing.account.savedTD&&($(EVEthing.account.savedTD).html(EVEthing.account.savedHTML),EVEthing.account.savedTD=null,EVEthing.account.savedHTML=null),EVEthing.account.savedTD=$(this).parent(),EVEthing.account.savedHTML=EVEthing.account.savedTD.html(),$(this).hasClass("js-edit-group-name"))var d="group_name",e="name";else var d="name",e="group_name";a.push('<form action="'+account_edit_url+'" method="POST" class="form-inline nomargin">'),a.push(csrf),a.push('<input type="hidden" class="nomargin" name="apikey_id" value="'+b+'">'),a.push('<input type="hidden" class="nomargin" name="dont_edit" value="'+e+'">'),a.push('<input type="text" class="nomargin input-medium" name="'+d+'" id="magic_keyname" value="'+$.trim(c)+'">'),a.push("</form>"),$(this).parent().html(a.join("")),$("#magic_keyname").focus()}),$("#key-table").on("click",".js-delete",function(){var a=$(this).parents("tr").attr("data-id"),b=$.trim($("td:nth-child(5)",$(this).parents("tr")).text());$("#delete-keyid-input").val(a),$("#delete-keyid").text(a),$("#delete-keyname").text(b)}),$("#key-table").on("click",".js-purge",function(){var a=$(this).parents("tr").attr("data-id"),b=$.trim($("td:nth-child(5)",$(this).parents("tr")).text());$("#purge-keyid-input").val(a),$("#purge-keyid").text(a),$("#purge-keyname").text(b)}),$(".edit-skillplan").on("click",function(){var a=$(this).parents("tr").attr("data-id"),b=$("td:nth-child(2)",$(this).parents("tr")).text(),c=$(this).parents("tr").attr("data-vis");$("#edit-skillplan-id").val(a),$("#edit-skillplan-name").val(b),$("#edit-skillplan-visibility").val(c)}),$(".delete-skillplan").on("click",function(){var a=$(this).parents("tr").attr("data-id"),b=$("td:nth-child(2)",$(this).parents("tr")).text();$("#delete-skillplan-id").val(a),$("#delete-skillplan-name").text(b)}),$("#build-table").on("change",".apikey-build",EVEthing.account.build_apikey),EVEthing.account.build_apikey(),EVEthing.account.HOME_GROUP_DATALIST=$("datalist#home_groups"),EVEthing.account.build_home_group_list(),$('tbody.characters input[type="text"]').change(EVEthing.account.build_home_group_list),$.tablesorter.addParser({id:"inputValueParser",is:function(a,b,c){return $(c).find("input").length>0},format:function(a,b,c){var d=$($(c).find("input")[0]);return"checkbox"==d.attr("type")?1==d[0].checked?"0":"1":d.val()},parsed:!0,type:"text"}),$("table.characters").tablesorter({uitheme:"bootstrap"})},HOME_GROUP_DATALIST:null,build_home_group_list:function(){EVEthing.account.HOME_GROUP_DATALIST.empty();for(var a={},b=$('tbody.characters input[type="text"]'),c=0;c<b.length;c++){var d=$(b[c]).val();d in a||(a[d]=!0)}a=Object.keys(a),a.sort();for(var c in a)EVEthing.account.HOME_GROUP_DATALIST.append($('<option value="'+a[c]+'" />'))},build_apikey:function(){$("#apikey-required").empty();var a=0;$(".apikey-build:checked").each(function(){masks=$(this).attr("data-masks").split(";");for(i in masks)mask=parseInt(masks[i]),0==(a&mask)&&(a+=mask,$("#apikey-required").append("<li>"+EVEthing.account.masks[mask]+"</li>"))}),$("#apikey-link").attr("href","https://community.eveonline.com/support/api-key/CreatePredefined?accessMask="+a),0==a&&$("#apikey-required").append("<li>None</li>")}},EVEthing.assets={onload:function(){EVEthing.filters.bind_events(),EVEthing.filters.load_filters(EVEthing.assets.filters),$(".assets-sidenav").affix({offset:EVEthing.assets.side_offset})},side_offset:{top:function(){var a=window.innerHeight,b=$("#sidenav").height();return a>=b+75?$("#sidenav-container").offset().top-50:999999}},filter_onload:function(){$(".asset-expand").on("click",function(){var a=$(this);a.hasClass("icon-chevron-right")?(a.addClass("icon-chevron-down").removeClass("icon-chevron-right"),$(a.attr("data-target")).show()):(a.addClass("icon-chevron-right").removeClass("icon-chevron-down"),$(a.attr("data-target")).hide())}),$(".asset-eft").on("click",function(){var a,b=$(this),c=$("span:nth-child(1)",b.parent()).attr("data-target"),d=$.trim($(".asset-ship-type",b.parent()).text()),e=$.trim($(".asset-ship-name",b.parent()).text()),f=null;e||(e="From Assets"),a="["+d+", "+e+"]\n",$(c).each(function(){var b=$.trim($("td:nth-child(4)",$(this)).text());if("Slot"==b.substr(-4)){f&&f!=b&&(a+="\n"),f=b;var c=$.trim($("td:nth-child(2)",$(this)).text());a+=c+"\n"}}),$("#eft-textarea").val(a),$("#eft-modal").modal("show")}),$("#eft-modal").on("shown",function(){$("#eft-textarea").select()})}},EVEthing.blueprints={onload:function(){$("#checkall").on("click",function(){$(".js-check").prop("checked",this.checked?"checked":!1)}),$(".bp-edit").on("click",function(){var a=$(this).parents("tr");$("#bp-edit-bpi_id").attr("value",a.find("td").eq(0).text()),$("#bp-edit-name").val(a.find("td").eq(1).text()),$("#bp-edit-ml").val(a.find("td").eq(3).text()),$("#bp-edit-pl").val(a.find("td").eq(4).text()),$("#edit-blueprint").modal("show")}),$(".bp-delete").on("click",function(){$tr=$(this).parents("tr"),$("#bp-del-bpi_id").attr("value",$tr.find("td").eq(0).text()),$("#bp-del-id").text($tr.find("td").eq(0).text()),$("#bp-del-name").text($tr.find("td").eq(1).text()),$("#bp-del-type").text($tr.find("td").eq(2).text()),$("#bp-del-ml").text($tr.find("td").eq(3).text()),$("#bp-del-pl").text($tr.find("td").eq(4).text()),$("#del-blueprint").modal("show")})}},EVEthing.bpcalc={onload:function(){$("#build-table").tablesorter({headers:{1:{sorter:!1},2:{sorter:"human"},3:{sorter:"human"},4:{sorter:!1},5:{sorter:"human"},7:{sorter:!1},8:{sorter:"human"},10:{sorter:!1},11:{sorter:!1},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1}},sortList:[[8,1]]})},filter_profit:function(){var a=[],b=$("#profit").attr("value");$("#build-table tbody tr").each(function(c,d){var e=$(d).children()[9],f=parseFloat($(e).text().split("%")[0]);f>=b&&a.push("bpi="+$(d).attr("data_bpi"))});var c=parseUri(window.location.href),d=c.queryKey.days;window.location=c.path+"?days="+d+"&"+a.join("&")},filter_movement:function(){var a=[],b=$("#movement").attr("value");$("#build-table tbody tr").each(function(c,d){var e=$(d).children()[14],f=parseFloat($(e).text().split("%")[0]);b>f&&a.push("bpi="+$(d).attr("data_bpi"))});var c=parseUri(window.location.href),d=c.queryKey.days;window.location=c.path+"?days="+d+"&"+a.join("&")},filter_slots:function(){var a=[],b=$("#slots").val();$("#build-table tbody tr").each(function(c,d){b>c&&a.push("bpi="+$(d).attr("data_bpi"))});var c=parseUri(window.location.href),d=c.queryKey.days;window.location=c.path+"?days="+d+"&"+a.join("&")},filter_checked:function(){var a=[];$("#build-table tbody tr td input").each(function(b,c){c.checked||a.push("bpi="+$(c).closest("tr").attr("data_bpi"))});var b=parseUri(window.location.href),c=b.queryKey.days;window.location=b.path+"?days="+c+"&"+a.join("&")}},EVEthing.character={anon_checked:null,sidenav_top:0,onload:function(){EVEthing.misc.setup_tab_hash(),$("#skillplans-toggle").on("click",function(){$("#skillplans-personal").toggle(),$("#skillplans-global").toggle()}),$("#settings-toggle").on("click",function(){$("#settings-box").toggle()}),$("#public-checkbox").change(EVEthing.character.public_checkbox_change),EVEthing.character.public_checkbox_change(),$("#anon-toggle").change(EVEthing.character.anon_toggle),EVEthing.character.anon_toggle($("#anon-toggle")),$("#settings-form").on("submit",EVEthing.character.settings_submit),$(".character-skills").affix({offset:EVEthing.character.skills_offset})},skills_offset:{top:function(){var a=window.innerHeight,b=$("#sidenav").height();return a>=b+75?$("#character-skills-container").offset().top-50:999999}},public_checkbox_change:function(a){var b=this.checked;(void 0===a||null===a)&&(b=$("#public-checkbox").is(":checked")),b?$(".disable-toggle").removeAttr("disabled"):$(".disable-toggle").attr("disabled","disabled")},anon_toggle:function(){if($("#anon-toggle").is(":checked")){var a=$("#anon-key").val();if(""!==a){var b='<a href="'+EVEthing.character.anon_url.replace("zzzz",a)+'">Anonymized link</a>';$("#anon-key-label").html(b)}else $("#anon-key-label").html('<span class="fa fa-anchor"></span> Save to get new link')}else $("#anon-key-label").empty()},settings_submit:function(a){return a.preventDefault&&a.preventDefault(),$("#settings-status").html('<span class="fa fa-spinner fa-spin"></span> Saving...'),$.post($(this).attr("action"),$(this).serialize(),function(a){"object"==typeof a?($("#anon-key").val(a.anon_key),$("#settings-status").html('<span class="fa fa-check"></span> Saved!'),EVEthing.character.anon_toggle()):$("#settings-status").html('<span class="fa fa-times"></span> Error!')}),!1}},EVEthing.filters={comparisons:{eq:"==",ne:"!=",gt:">",gte:">=",lt:"<",lte:"<=","in":"contains",bt:"between"},bind_events:function(){$("#filters").on("click",".js-add",function(){$("#filters").append(EVEthing.filters.build()),$(".date").datepicker()}),$("#filters").on("click",".js-delete",function(){$(this).parent().parent().remove(),0==$(".filter-type").length&&$("#filters").append(EVEthing.filters.build())}),$("#filters").on("change",".filter-type",function(){var a=$(this);a.siblings("select, input").remove(),a.after(EVEthing.filters.build_comparison(a.val(),void 0));var b=a.next();b.after(EVEthing.filters.build_value(a.val(),b.val(),"")),$(".date").datepicker()}),$("#filters").on("change",".filter-comp",function(){var a=$(this).prev(),b=$(this),c=b.next(),d=b.val();("in"===d&&!c.is("input")||"bt"===d||"in"!==d&&"bt"!==d&&!c.is("select"))&&(c.remove(),b.after(EVEthing.filters.build_value(a.val(),b.val(),"")),$(".date").datepicker())}),$("#filters").on("changeDate",".date",function(){var a=$("span:first",$(this).parent().parent()),b=[];$.each($('input[type="text"]',a),function(a,c){b.push($(c).val())}),$('input[type="hidden"]',a).val(b.join())}),$(".date").datepicker()},load_filters:function(a){var b=0;$.each(a,function(a,c){for(var d=0;d<c.length;d++)$("#filters").append(EVEthing.filters.build(a,c[d][0],c[d][1])),b++}),0===b&&$("#filters").append(EVEthing.filters.build())},build:function(a,b,c){var d='<div class="row asset-filter"><div class="col-sm-12"><div class="form-group">';return d+='<select name="ft" class="filter-type form-control" style=">',d+='<option value=""></option>',$.each(EVEthing.util.sorted_keys(EVEthing.filters.expected),function(b,c){d+=c===a?'<option value="'+c+'" selected>'+EVEthing.filters.expected[c].label+"</option>":'<option value="'+c+'">'+EVEthing.filters.expected[c].label+"</option>"}),d+="</select>",a&&(d+=EVEthing.filters.build_comparison(a,b),d+=EVEthing.filters.build_value(a,b,c)),d+='</div>&nbsp;<span class="js-add fa fa-plus clickable filter-icon"></span>',d+='<span class="js-delete fa fa-trash-o clickable filter-icon"></span>',d+="</div></div>"},build_comparison:function(a,b){var c=' <select name="fc" class="filter-comp input-small form-control">';for(var d in EVEthing.filters.expected[a].comps){var e=EVEthing.filters.expected[a].comps[d];c+=e==b?'<option value="'+e+'" selected>'+EVEthing.filters.comparisons[e]+"</option>":'<option value="'+e+'">'+EVEthing.filters.comparisons[e]+"</option>"}return c+="</select>"},build_value:function(a,b,c){var d=" ";if("in"==b)d+='<input name="fv" class="filter-value" type="text" value="'+c+'">';else if("date"==a){dates=c.split(",");for(var e=dates.length;2>e;e++)dates.push("");d+='<div class="date input-group" data-date="'+dates[0]+'" data-date-format="yyyy-mm-dd">',d+='<input type="text" class="form-control" value="'+dates[0]+'" readonly>',d+='<span class="input-group-addon"><span class="fa fa-calendar"></span></span></div>',"bt"==b&&(d+=" and ",d+='<div class="input-group date" data-date="'+dates[1]+'" data-date-format="yyyy-mm-dd">',d+='<input type="text" class="form-control" value="'+dates[1]+'" readonly>',d+='<span class="input-group-addon"><span class="fa fa-calendar"></span></span></div>'),d+='<input type="hidden" name="fv" value="">'}else EVEthing.filters.data[a]?(d+='<select name="fv" class="form-control filter-value" style="width:40%" >',$.each(EVEthing.util.sorted_keys_by_value(EVEthing.filters.data[a]),function(b,e){var f=EVEthing.filters.data[a][e];d+=e==c?'<option value="'+e+'" selected>'+f+"</option>":'<option value="'+e+'">'+f+"</option>"}),d+="</select>"):d+='<input name="fv" class="form-control filter-value" style="width:40%" type="text" value="'+c+'">';return d}},$.ajaxSetup({crossDomain:!1,beforeSend:function(a,b){csrfSafeMethod(b.type)||a.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"))}}),Handlebars.registerHelper("lookup",function(a,b){return a.hasOwnProperty(b)?a[b]:b
}),Handlebars.registerHelper("corp",function(a){if(EVEthing.home.CORPORATIONS.hasOwnProperty(a)){var b=EVEthing.home.CORPORATIONS[a],c="["+b.ticker+"] "+b.name;if(EVEthing.home.ALLIANCES.hasOwnProperty(b.alliance)){var d=EVEthing.home.ALLIANCES[b.alliance];c=c+"<br/> ("+d.short_name+") "+d.name}return c}return a}),Handlebars.registerHelper("systems_details",function(a){return EVEthing.home.SYSTEMS.hasOwnProperty(a)?a+" - "+EVEthing.home.SYSTEMS[a].constellation+" - "+EVEthing.home.SYSTEMS[a].region:""}),Handlebars.registerHelper("roman",function(a){if(!+a)return!1;for(var b=String(+a).split(""),c=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],d="",e=3;e--;)d=(c[+b.pop()+10*e]||"")+d;return Array(+b.join("")+1).join("M")+d}),Handlebars.registerHelper("comma",function(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}),Handlebars.registerHelper("duration",function(a){return __duration(a).join(" ")}),Handlebars.registerHelper("shortduration",function(a){var b=__duration(a),c=[];return b.length>2?(c[0]=b[0],c[1]=b[1]):c=b,c.join(" ")}),"undefined"==typeof EVEthing&&(EVEthing={}),EVEthing.home={ONE_DAY:86400,EXPIRE_WARNING:864e3,REPLACEMENTS:{"character-name":"Character Name","apikey-name":"API name","corporation-name":"Corporation Name [TICKR]","character-location":"Hoth -- X-Wing","wallet-division":"Hookers & Blow","user-name":"Mr. User"},SP_PER_LEVEL:{0:0,1:250,2:1415,3:8e3,4:45255,5:256e3},PROFILE:{CHAR_COL_SPAN:3,HOME_CHARS_PER_ROW:4,HOME_SHOW_LOCATIONS:!0,HOME_SHOW_SEPARATORS:!0,HOME_SORT_ORDER:"apiname",HOME_SORT_DESCENDING:!1,HOME_SORT_EMPTY_QUEUE_LAST:!1,HOME_HIGHLIGHT_BACKGROUNDS:!0,HOME_HIGHLIGHT_BORDER:!0},SUCCESS_CSS_CLASS:"",WARNING_CSS_CLASS:"",ERROR_CSS_CLASS:"",SORT_PROFILE_TO_FUNC_MAP:{skillqueue:"skill_queue",apiname:"api_name",charname:"char_name",corpname:"corp_name",totalsp:"total_sp",wallet:"wallet_balance"},FUNC_TO_SORT_PROFILE_MAP:{},UPDATE_CHECK_PERIOD:300,IGNORE_GROUPS:!1,SHIPS:{},CORPORATIONS:{},ALLIANCES:{},SYSTEMS:{},CHARACTERS:{},EVENTS:[],CHARACTER_TEMPLATE:Handlebars.getTemplate("home_character"),CHARACTER_ORDER:[],REFRESH_HINTS:{skill_queue:{},character:{}},HOME_PAGE_UPDATE_DELAY:null};for(var i in EVEthing.home.SORT_PROFILE_TO_FUNC_MAP)EVEthing.home.SORT_PROFILE_TO_FUNC_MAP.hasOwnProperty(i)&&(EVEthing.home.FUNC_TO_SORT_PROFILE_MAP[EVEthing.home.SORT_PROFILE_TO_FUNC_MAP[i]]=i);EVEthing.home.onload=function(){$("body").on("click",".js-screenshot",EVEthing.home.screenshot_mode),EVEthing.home.initialLoad();var a=document.cookie.split(/[;\s|=]/),b=a.indexOf("homePageSortBy");b>=0&&(EVEthing.home.PROFILE.HOME_SORT_ORDER=EVEthing.home.FUNC_TO_SORT_PROFILE_MAP[a[b+1]],EVEthing.home.PROFILE.HOME_SORT_DESCENDING="desc"==a[a.indexOf("homePageSortOrder")+1]);var c=a.indexOf("homePageSortEmptyQueueLast");c>=0&&("true"==a[c+1]?EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST=!0:"false"==a[c+1]&&(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST=!1));var d=a.indexOf("homePageIgnoreGroups");d>=0&&("true"==a[d+1]?EVEthing.home.IGNORE_GROUPS=!0:"false"==a[d+1]&&(EVEthing.home.IGNORE_GROUPS=!1));var e=EVEthing.home.character_ordering[EVEthing.home.SORT_PROFILE_TO_FUNC_MAP[EVEthing.home.PROFILE.HOME_SORT_ORDER]],f=$('<li class="pull-right dropdown sort-by"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="caret"></b>Sort By: <output></output></a></li>');f.find("output").val(e.NAME+" "+(EVEthing.home.PROFILE.HOME_SORT_DESCENDING?e.NAME_REVERSE:e.NAME_FORWARD));var g=$('<ul class="dropdown-menu"></ul>');f.append(g);for(var h in EVEthing.home.character_ordering)EVEthing.home.character_ordering.hasOwnProperty(h)&&g.append('<li><a href="#'+h+'">'+EVEthing.home.character_ordering[h].NAME+"</a></li>");g.append('<li class="divider"></li>'),g.append('<li><a href="#empty_queue_last"><b class="fa fa-'+(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST?"check-circle":"circle-o")+'"></b> Empty Queues Last</a></li>'),g.append('<li><a href="#use_groups"><b class="fa fa-'+(EVEthing.home.IGNORE_GROUPS?"circle-o":"check-circle")+'"></b> Use Groups</a></li>'),g.find("a").click(EVEthing.home.onSortByClicked),$("ul.summary-row li.pull-right").after(f),EVEthing.home.PROFILE.HOME_HIGHLIGHT_BACKGROUNDS&&(EVEthing.home.SUCCESS_CSS_CLASS+=" background-success",EVEthing.home.WARNING_CSS_CLASS+=" background-warn",EVEthing.home.ERROR_CSS_CLASS+=" background-error"),EVEthing.home.PROFILE.HOME_HIGHLIGHT_BORDER&&(EVEthing.home.SUCCESS_CSS_CLASS+=" border-success",EVEthing.home.WARNING_CSS_CLASS+=" border-warn",EVEthing.home.ERROR_CSS_CLASS+=" border-error"),window.requestAnimationFrame(function(){EVEthing.home.animate(Math.round((new Date).getTime()/1e3)-10)})},EVEthing.home.lastUpdateCheck=(new Date).getTime()/1e3,EVEthing.home.animate=function(a){var b=Math.round((new Date).getTime()/1e3);if(1>b-a)window.requestAnimationFrame(function(){EVEthing.home.animate(a)});else{window.requestAnimationFrame(function(){EVEthing.home.animate(b)});var c=0;for(var d in EVEthing.home.CHARACTERS)if(EVEthing.home.CHARACTERS.hasOwnProperty(d)){var e=EVEthing.home.CHARACTERS[d].animate(b);c+=e.total_sp}$('output[name="total_sp"]').val(Handlebars.helpers.comma(c)+" SP");for(var d in EVEthing.home.EventDisplay.EVENTS)EVEthing.home.EventDisplay.EVENTS.hasOwnProperty(d)&&EVEthing.home.EventDisplay.EVENTS[d].animate(b);if(EVEthing.home.HOME_PAGE_UPDATE_DELAY!==!1&&b-EVEthing.home.lastUpdateCheck>EVEthing.home.UPDATE_CHECK_PERIOD){EVEthing.home.lastUpdateCheck=b;var f={},g={};for(var d in EVEthing.home.REFRESH_HINTS.skill_queue)EVEthing.home.REFRESH_HINTS.skill_queue.hasOwnProperty(d)&&EVEthing.home.REFRESH_HINTS.skill_queue[d]<b+EVEthing.home.HOME_PAGE_UPDATE_DELAY&&(f[d]=!0,g.skill_queue=!0);for(var d in EVEthing.home.REFRESH_HINTS.character)EVEthing.home.REFRESH_HINTS.character.hasOwnProperty(d)&&EVEthing.home.REFRESH_HINTS.character[d]<b+EVEthing.home.HOME_PAGE_UPDATE_DELAY&&(f[d]=!0,g.characters=!0);EVEthing.home.partialLoad(Object.keys(g),Object.keys(f))}}},EVEthing.home.onSortByClicked=function(a){a.stopPropagation(),a.preventDefault();var b=$(a.target);b.is("b")&&(b=b.parent());var c=b[0].href.split("#")[1];if("use_groups"==c){EVEthing.home.IGNORE_GROUPS=!EVEthing.home.IGNORE_GROUPS;var d=$(b).find("b");d.removeClass("fa fa-circle-o fa-check-circle"),d.addClass("fa fa-"+(EVEthing.home.IGNORE_GROUPS?"circle-o":"check-circle")),document.cookie="homePageIgnoreGroups="+String(EVEthing.home.IGNORE_GROUPS)}else if("empty_queue_last"==c){EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST=!EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST;var d=$(b).find("b");d.removeClass("fa fa-circle-o fa-check-circle"),d.addClass("fa fa-"+(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST?"check-circle":"circle-o")),document.cookie="homePageSortEmptyQueueLast="+String(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST)}else{var e=EVEthing.home.character_ordering[c],f="asc",g=e.NAME+" "+(EVEthing.home.PROFILE.HOME_SORT_DESCENDING?e.NAME_REVERSE:e.NAME_FORWARD),h=$("li.sort-by output");h.val()!=g?h.val(g):(h.val(e.NAME+" "+(EVEthing.home.PROFILE.HOME_SORT_DESCENDING?e.NAME_FORWARD:e.NAME_REVERSE)),f="desc",e=EVEthing.home.reverse_ordering(e)),document.cookie="homePageSortBy="+c,document.cookie="homePageSortOrder="+f,EVEthing.home.sort_characters(e)}return EVEthing.home.draw_characters(),!1},EVEthing.home.draw_characters=function(){if(EVEthing.home.CHARACTER_ORDER.length!=Object.keys(EVEthing.home.CHARACTERS).length&&EVEthing.home.sort_characters(),EVEthing.home.IGNORE_GROUPS)EVEthing.home.GroupDisplay.removeAll(),EVEthing.home.CharacterListDisplay.draw(),EVEthing.home.CharacterListDisplay.html.insertAfter(".summary-row");else{EVEthing.home.CharacterListDisplay.remove();for(var a=0;a<EVEthing.home.GroupDisplay.GROUP_ORDER.length;a++)EVEthing.home.GroupDisplay.GROUPS[EVEthing.home.GroupDisplay.GROUP_ORDER[a]].draw(),EVEthing.home.GroupDisplay.GROUPS[EVEthing.home.GroupDisplay.GROUP_ORDER[a]].html.insertAfter(".summary-row")}},EVEthing.home.character_ordering={},EVEthing.home.character_ordering.skill_queue=function(a,b){return EVEthing.home.CHARACTERS[a].character.skill_queue_duration-EVEthing.home.CHARACTERS[b].character.skill_queue_duration},EVEthing.home.character_ordering.skill_queue.NAME="Skill Queue Duration",EVEthing.home.character_ordering.skill_queue.NAME_FORWARD="Asc",EVEthing.home.character_ordering.skill_queue.NAME_REVERSE="Desc",EVEthing.home.character_ordering.api_name=function(a,b){return EVEthing.home.CHARACTERS[a].character.apikey.name.localeCompare(EVEthing.home.CHARACTERS[b].character.apikey.name)},EVEthing.home.character_ordering.api_name.NAME="API Name",EVEthing.home.character_ordering.api_name.NAME_FORWARD="Asc",EVEthing.home.character_ordering.api_name.NAME_REVERSE="Desc",EVEthing.home.character_ordering.char_name=function(a,b){return EVEthing.home.CHARACTERS[a].character.name.localeCompare(EVEthing.home.CHARACTERS[b].character.name)},EVEthing.home.character_ordering.char_name.NAME="Character Name",EVEthing.home.character_ordering.char_name.NAME_FORWARD="Asc",EVEthing.home.character_ordering.char_name.NAME_REVERSE="Desc",EVEthing.home.character_ordering.corp_name=function(a,b){var c=EVEthing.home.CHARACTERS[a].character.corporation,d=EVEthing.home.CHARACTERS[b].character.corporation;return EVEthing.home.CORPORATIONS[c].name.localeCompare(EVEthing.home.CORPORATIONS[d].name)},EVEthing.home.character_ordering.corp_name.NAME="Corporation Name",EVEthing.home.character_ordering.corp_name.NAME_FORWARD="Asc",EVEthing.home.character_ordering.corp_name.NAME_REVERSE="Desc",EVEthing.home.character_ordering.total_sp=function(a,b){return EVEthing.home.CHARACTERS[a].character.details.total_sp-EVEthing.home.CHARACTERS[b].character.details.total_sp},EVEthing.home.character_ordering.total_sp.NAME="Total Skill Points",EVEthing.home.character_ordering.total_sp.NAME_FORWARD="Asc",EVEthing.home.character_ordering.total_sp.NAME_REVERSE="Desc",EVEthing.home.character_ordering.wallet_balance=function(a,b){return EVEthing.home.CHARACTERS[a].character.details.wallet_balance-EVEthing.home.CHARACTERS[b].character.details.wallet_balance},EVEthing.home.character_ordering.wallet_balance.NAME="Wallet Ballance",EVEthing.home.character_ordering.wallet_balance.NAME_FORWARD="Asc",EVEthing.home.character_ordering.wallet_balance.NAME_REVERSE="Desc",EVEthing.home.reverse_ordering=function(a){return function(b,c){return a(c,b)}},EVEthing.home.sort_characters=function(){EVEthing.home.CHARACTER_ORDER.length!=EVEthing.home.CHARACTERS.length&&(EVEthing.home.CHARACTER_ORDER=Object.keys(EVEthing.home.CHARACTERS));var a=[];for(var b in arguments)arguments.hasOwnProperty(b)&&(a[a.length]=arguments[b]);if(0==a.length&&EVEthing.home.SORT_PROFILE_TO_FUNC_MAP.hasOwnProperty(EVEthing.home.PROFILE.HOME_SORT_ORDER)){var c=EVEthing.home.SORT_PROFILE_TO_FUNC_MAP[EVEthing.home.PROFILE.HOME_SORT_ORDER];EVEthing.home.character_ordering.hasOwnProperty(c)&&(a[0]=EVEthing.home.character_ordering[c])}if(0==a.length)for(var b in EVEthing.home.character_ordering)EVEthing.home.character_ordering.hasOwnProperty(b)&&(a[a.length]=EVEthing.home.character_ordering[b]);for(var b=0;b<a.length;b++){var d=a[b];EVEthing.home.PROFILE.HOME_SORT_DESCENDING&&(d=EVEthing.home.reverse_ordering(d)),EVEthing.home.CHARACTER_ORDER.sort(d)}},EVEthing.home.initialLoad=function(){$.get("home/api",{options:["characters","details","corporations","alliances","skill_queues","event_log","summary","systems"]},EVEthing.home.handleResponse)},EVEthing.home.partialLoad=function(a,b){a[a.length]="event_log",a[a.length]="summary",a[a.length]="corporations",a[a.length]="alliances",a[a.length]="systems",$.post("home/api",{characters:b,options:a,known_ships:Object.keys(EVEthing.home.SHIPS),known_corporations:Object.keys(EVEthing.home.CORPORATIONS),known_alliances:Object.keys(EVEthing.home.ALLIANCES),known_systems:Object.keys(EVEthing.home.SYSTEMS)},EVEthing.home.handleResponse)},EVEthing.home.handleResponse=function(a){if(a.hasOwnProperty("ships")&&(EVEthing.home.parseShips(a),delete a.ships),a.hasOwnProperty("alliances")&&(EVEthing.home.parseAlliances(a),delete a.alliances),a.hasOwnProperty("corporations")&&(EVEthing.home.parseCorporations(a),delete a.corporations),a.hasOwnProperty("systems")&&(EVEthing.home.parseSystems(a),delete a.systems),a.hasOwnProperty("refresh_hints")&&(EVEthing.home.parseRefreshHints(a),delete a.refresh_hints),a.hasOwnProperty("characters")){var b=0;for(var c in a.characters)a.characters.hasOwnProperty(c)&&(EVEthing.home.CHARACTERS.hasOwnProperty(c)?EVEthing.home.CHARACTERS[c].parseResponse(a):(EVEthing.home.CHARACTERS[c]=new EVEthing.home.CharacterDisplay(c,a),EVEthing.home.GroupDisplay.addCharacter(EVEthing.home.CHARACTERS[c])),b+=parseFloat(EVEthing.home.CHARACTERS[c].character.details.wallet_balance));$('output[name="total_wallet"]').val(Handlebars.helpers.comma(b.toFixed(2))+" ISK")}if(a.hasOwnProperty("events"))for(var c=a.events.length-1;c>=0;c--)new EVEthing.home.EventDisplay(a.events[c].text,a.events[c].issued);a.hasOwnProperty("summary")&&a.summary.hasOwnProperty("total_assets")&&$('output[name="personal_assets"]').val(Handlebars.helpers.comma(a.summary.total_assets)+" ISK"),new EVEthing.home.EventDisplay("Data Loaded",Math.round((new Date).getTime()/1e3)),EVEthing.home.draw_characters()},EVEthing.home.parseShips=function(a){for(var b in a.ships)a.ships.hasOwnProperty(b)&&(EVEthing.home.SHIPS[b]=a.ships[b])},EVEthing.home.parseAlliances=function(a){for(var b in a.alliances)a.alliances.hasOwnProperty(b)&&(EVEthing.home.ALLIANCES[b]=a.alliances[b])},EVEthing.home.parseCorporations=function(a){for(var b in a.corporations)a.corporations.hasOwnProperty(b)&&(EVEthing.home.CORPORATIONS[b]=a.corporations[b])},EVEthing.home.parseSystems=function(a){for(var b in a.systems)a.systems.hasOwnProperty(b)&&(EVEthing.home.SYSTEMS[b]=a.systems[b])},EVEthing.home.parseRefreshHints=function(a){for(var b in a.refresh_hints)if(a.refresh_hints.hasOwnProperty(b))for(var c in a.refresh_hints[b])a.refresh_hints[b].hasOwnProperty(c)&&(EVEthing.home.REFRESH_HINTS[b][c]=Math.round(new Date(a.refresh_hints[b][c]+"+00:00").getTime()/1e3))},EVEthing.home.screenshot_mode=function(){$(".sensitive").each(function(){var a=$(this),b=a.attr("oldname");if(void 0===b){a.attr("oldname",a.text());for(var c=a.attr("class").split(/\s+/),d=0;d<c.length;d++){var e=EVEthing.home.REPLACEMENTS[c[d]];if(void 0!==e){a.text(e);break}}}else a.text(b),a.removeAttr("oldname")});var a=Array();$(".row-fluid").each(function(){var b=$(this);$(".well",b).each(function(){var b=$(this),c=!1;$("[rel=tooltip]",b).each(function(){var b=$(this);0==c&&void 0===a[b.attr("class")]&&(c=!0,a[b.attr("class")]=!0,void 0===b.attr("shown")?(b.tooltip("show"),b.attr("shown","yup")):(b.tooltip("hide"),b.removeAttr("shown")))})})})},EVEthing.home.CharacterListDisplay={},EVEthing.home.CharacterListDisplay.draw=function(){"undefined"==typeof this.html&&(this.html=null),null!==this.html&&this.html.remove(),this.html=$('<div class="margin-half-top"></div>');for(var a=this.html,b=[],c=0;c<EVEthing.home.CHARACTER_ORDER.length;c++)if(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST){var d=!0;EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].character.hasOwnProperty("skill_queue")&&EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].character.skill_queue.length>0&&(d=!1,a.append(EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].well)),d&&(b[b.length]=EVEthing.home.CHARACTER_ORDER[c])}else a.append(EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].well);for(var c=0;c<b.length;c++)a.append(EVEthing.home.CHARACTERS[b[c]].well);this.html.append("<hr />")},EVEthing.home.CharacterListDisplay.remove=function(){"undefined"==typeof this.html&&(this.html=null),null!==this.html&&this.html.remove()},EVEthing.home.GroupDisplay=function(a){this.name=a,this.characters=[],this.html=null},EVEthing.home.GroupDisplay.GROUP_ORDER=[],EVEthing.home.GroupDisplay.GROUPS={},EVEthing.home.GroupDisplay.addCharacter=function(a){EVEthing.home.GroupDisplay.GROUPS.hasOwnProperty(a.character.config.home_group)||(EVEthing.home.GroupDisplay.GROUPS[a.character.config.home_group]=new EVEthing.home.GroupDisplay(a.character.config.home_group),EVEthing.home.GroupDisplay.GROUP_ORDER[EVEthing.home.GroupDisplay.GROUP_ORDER.length]=a.character.config.home_group,EVEthing.home.GroupDisplay.GROUP_ORDER.sort().reverse()),EVEthing.home.GroupDisplay.GROUPS[a.character.config.home_group].add(a)},EVEthing.home.GroupDisplay.removeAll=function(){for(var a in EVEthing.home.GroupDisplay.GROUPS)EVEthing.home.GroupDisplay.GROUPS.hasOwnProperty(a)&&EVEthing.home.GroupDisplay.GROUPS[a].remove()},EVEthing.home.GroupDisplay.prototype.add=function(a){this.characters[this.characters.length]=a.character_id},EVEthing.home.GroupDisplay.prototype.draw=function(){null!==this.html&&this.html.remove(),this.html=$('<div class="margin-half-top clearfix"></div>'),this.html.append($("<p>"+this.name+"</p>"));for(var a=this.html,b=[],c=0;c<EVEthing.home.CHARACTER_ORDER.length;c++)if(this.characters.indexOf(EVEthing.home.CHARACTER_ORDER[c])>=0)if(EVEthing.home.PROFILE.HOME_SORT_EMPTY_QUEUE_LAST){var d=!0;EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].character.hasOwnProperty("skill_queue")&&EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].character.skill_queue.length>0&&(d=!1,a.append(EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].well)),d&&(b[b.length]=EVEthing.home.CHARACTER_ORDER[c])}else a.append(EVEthing.home.CHARACTERS[EVEthing.home.CHARACTER_ORDER[c]].well);for(var c=0;c<b.length;c++)a.append(EVEthing.home.CHARACTERS[b[c]].well);this.html.append("<hr />")},EVEthing.home.GroupDisplay.prototype.remove=function(){null!==this.html&&this.html.remove()},EVEthing.home.EventDisplay=function(a,b){this.issued=String(parseInt(b))===String(b)?b:Math.round(new Date(b+"+00:00").getTime()/1e3),EVEthing.home.EventDisplay.EVENTS.hasOwnProperty(""+this.issued+"|"+a)||(this.html=$("<li></li>"),this.age=$("<span></span>"),this.text=$("<span></span>"),this.text.html(a),this.html.append(this.age),this.html.append($("<strong> / </strong>")),this.html.append(this.text),$(".events").prepend(this.html),EVEthing.home.EventDisplay.EVENTS[""+this.issued+"|"+a]=this)},EVEthing.home.EventDisplay.EVENTS={},EVEthing.home.EventDisplay.prototype.animate=function(a){this.age.text(Handlebars.helpers.shortduration(a-this.issued)+" ago")},EVEthing.home.CharacterDisplay=function(a,b){this.character_id=a,this.character={},this.well=$("<div></div>"),this.well.addClass("col-xs-12"),this.well.addClass("col-sm-6"),this.well.addClass("col-md-"+EVEthing.home.PROFILE.CHAR_COL_SPAN),this.well.addClass("col-lg-"+EVEthing.home.PROFILE.CHAR_COL_SPAN),this.html=null,"undefined"!=typeof b?this.parseResponse(b):this.load()},EVEthing.home.CharacterDisplay.prototype.load=function(){},EVEthing.home.CharacterDisplay.prototype.animate=function(a){var b=!1,c=!1,d=this.character.details.total_sp,e=!0;if(this.character.hasOwnProperty("skill_queue")&&this.character.skill_queue.length>0){for(e=!1;this.character.skill_queue[0].end_time<a;)this.character.details.total_sp=this.character.details.total_sp+this.character.skill_queue[0].end_sp-this.character.skill_queue[0].start_sp,this.character.skill_queue.shift(),d=this.character.details.total_sp,this.render();var f=this.character.skill_queue[0].end_time-Math.round((new Date).getTime()/1e3),g=f*(this.character.skill_queue[0].sp_per_minute/60),h=EVEthing.home.SP_PER_LEVEL[this.character.skill_queue[0].to_level-1]*this.character.skill_queue[0].skill.rank,i=EVEthing.home.SP_PER_LEVEL[this.character.skill_queue[0].to_level]*this.character.skill_queue[0].skill.rank,j=i-h;d=Math.round(d+(j-g)),this.well.find(".total-sp").text(Handlebars.helpers.comma(d)+" SP");var k=(j-g)/j*100;this.well.find(".progress .bar").text(k.toFixed(1)+"%").css("width",k+"%"),this.well.find(".skillduration").text(Handlebars.helpers.duration(f)+" @ "+Handlebars.helpers.comma(this.character.skill_queue[0].sp_per_hour)+" SP/h");for(var l=f,m=1;m<this.character.skill_queue.length;m++)l+=this.character.skill_queue[m].end_time-this.character.skill_queue[m].start_time;if(this.well.find(".queueduration").text(Handlebars.helpers.shortduration(l)),this.character.config.home_suppress_low_skill_queue||(l<EVEthing.home.ONE_DAY?(this.well.find(".progress").addClass("progress-danger"),this.well.find(".home-notifications .low-skill-queue").show(),this.well.find(".home-notifications .low-skill-queue span").text(Handlebars.helpers.shortduration(f)),c=!0):(this.well.find(".progress").removeClass("progress-danger"),this.well.find(".home-notifications .low-skill-queue").hide())),!this.character.config.home_suppress_implants)if(0==this.character.details[this.character.skill_queue[0].skill.primary_attribute[1]]||0==this.character.details[this.character.skill_queue[0].skill.secondary_attribute[1]]){var n="";if(0==this.character.details[this.character.skill_queue[0].skill.primary_attribute[1]]){var o=this.character.skill_queue[0].skill.primary_attribute[1].split("_")[0];n=o.charAt(0).toUpperCase()+o.slice(1)}if(0==this.character.details[this.character.skill_queue[0].skill.secondary_attribute[1]]){var o=this.character.skill_queue[0].skill.secondary_attribute[1].split("_")[0];""!=n&&(n+=", "),n=n+o.charAt(0).toUpperCase()+o.slice(1)}this.well.find(".home-notifications .implants span").text(n),this.well.find(".home-notifications .implants").show(),b=!0}else this.well.find(".home-notifications .implants").hide()}this.character.config.home_suppress_empty_skill_queue||(e?(this.well.find(".home-notifications .empty-skill-queue").show(),c=!0):this.well.find(".home-notifications .empty-skill-queue").hide()),this.character.details.clone_skill_points<d?(b=!0,this.well.find(".home-notifications .clone").show(),this.well.find(".home-notifications .clone span").text(Handlebars.helpers.comma(this.character.details.clone_skill_points))):this.well.find(".home-notifications .clone").hide(),this.character.apikey.expires&&(this.character.apikey.expires-a<EVEthing.home.EXPIRE_WARNING?this.well.find(".home-notifications .key-expiring").show():this.well.find(".home-notifications .key-expiring").hide());var p=this.character.apikey.paid_until-a;return 0>p?this.character.config.home_suppress_no_game_time||(c=!0,this.well.find(".home-notifications .no-game-time").show()):(this.well.find(".home-notifications .no-game-time").hide(),p<EVEthing.home.EXPIRE_WARNING?this.character.config.home_suppress_low_game_time||(b=!0,this.well.find(".home-notifications .low-game-time").show(),this.well.find(".home-notifications .low-game-time span").text(Handlebars.helpers.shortduration(p))):this.well.find(".home-notifications .low-game-time").hide()),b||c?this.well.find(".home-notifications").show():this.well.find(".home-notifications").hide(),this.well.find(".well").removeClass("background-error border-error"),this.well.find(".well").removeClass("background-warn border-warn"),this.well.find(".well").removeClass("background-success border-success"),this.well.find(".well").addClass(c?EVEthing.home.ERROR_CSS_CLASS:b?EVEthing.home.WARNING_CSS_CLASS:EVEthing.home.SUCCESS_CSS_CLASS),{total_sp:d}},EVEthing.home.CharacterDisplay.prototype.parseResponse=function(a){for(var b in a.characters[this.character_id])a.characters[this.character_id].hasOwnProperty(b)&&(this.character[b]=a.characters[this.character_id][b]);if(a.characters[this.character_id].hasOwnProperty("skill_queue"))for(var c=0;c<this.character.skill_queue.length;c++){var d=0;d+=this.character.details[this.character.skill_queue[c].skill.primary_attribute[0]],d+=this.character.details[this.character.skill_queue[c].skill.primary_attribute[1]];var e=0;e+=this.character.details[this.character.skill_queue[c].skill.secondary_attribute[0]],e+=this.character.details[this.character.skill_queue[c].skill.secondary_attribute[1]],this.character.skill_queue[c].sp_per_minute=d+e/2,this.character.skill_queue[c].sp_per_hour=60*this.character.skill_queue[c].sp_per_minute,this.character.skill_queue[c].end_time=Math.round(new Date(this.character.skill_queue[c].end_time+"+00:00").getTime()/1e3),this.character.skill_queue[c].start_time=Math.round(new Date(this.character.skill_queue[c].start_time+"+00:00").getTime()/1e3)}this.character.hasOwnProperty("skill_queue_duration")||(this.character.skill_queue_duration=0),this.character.apikey.expires&&(this.character.apikey.expires=Math.round(new Date(this.character.apikey.expires+"+00:00").getTime()/1e3)),this.character.apikey.paid_until&&(this.character.apikey.paid_until=Math.round(new Date(this.character.apikey.paid_until+"+00:00").getTime()/1e3)),a.hasOwnProperty("ships")&&EVEthing.home.parseShips(a),a.hasOwnProperty("alliances")&&EVEthing.home.parseAlliances(a),a.hasOwnProperty("corporations")&&EVEthing.home.parseCorporations(a),a.hasOwnProperty("systems")&&EVEthing.home.parseSystems(a),this.html=this.render()},EVEthing.home.CharacterDisplay.prototype.render=function(){this.html=$(EVEthing.home.CHARACTER_TEMPLATE({character:this.character,profile:EVEthing.home.PROFILE,ships:EVEthing.home.SHIPS,corporations:EVEthing.home.CORPORATIONS,alliances:EVEthing.home.ALLIANCES})),this.html.find('[rel="popover"]').popover({animation:!1,trigger:"hover",html:!0}),this.html.find('[rel="tooltip"]').tooltip({animation:!1,trigger:"hover",html:!0}),this.well.empty(),this.well.append(this.html)},EVEthing.industry={onload:function(){EVEthing.misc.setup_tab_hash()}},EVEthing.mail={onload:function(){$("#mail-side").on("click",".js-filter",function(){setTimeout(EVEthing.mail.build_table,1)}),$("#mail-side").on("change","select",EVEthing.mail.build_table),$("#mail-mark-read-button").on("click",EVEthing.mail.mark_read_click),$("#mail-list-check-all").on("click",EVEthing.mail.mail_check_all_click),$("#mail-list-table").on("click",".mail-link",EVEthing.mail.mail_link_click),$(window).on("resize",EVEthing.mail.resize),EVEthing.mail.resize();var a='<option value="0" selected>-ALL-</option><option value="-" disabled>——————————</option>';$.each(EVEthing.util.sorted_keys_by_value(EVEthing.mail.characters),function(b,c){a+='<option value="'+c+'">'+EVEthing.mail.characters[c]+"</option>"}),$("#filter-character").html(a),$("#mail-list-table").tablesorter({theme:"bootstrap",headerTemplate:"{content} {icon}",widgets:["uitheme"],headers:{0:{sorter:!1}},sortList:[[4,1]]}),EVEthing.mail.onload_hash(),$.get(EVEthing.mail.headers_url,function(a){EVEthing.mail.data=a,EVEthing.mail.data.message_map={};for(var b=0;b<a.messages.length;b++){var c=a.messages[b];if(EVEthing.mail.data.message_map[c.message_id]=c,c.to_list_id>0){var d=EVEthing.mail.data.mailing_lists[c.to_list_id]||"Unknown list";c.to_list='<i class="icon-list"></i> '+d}else if(c.to_corp_or_alliance_id>0){var e=EVEthing.mail.data.corporations[c.to_corp_or_alliance_id];if(void 0!==e)c.to_corporation='<i class="icon-group"></i> '+e.name;else{var f=EVEthing.mail.data.alliances[c.to_corp_or_alliance_id];c.to_alliance=void 0!==f?'<i class="icon-hospital"></i> '+f.name:'<i class="icon-hospital"></i> Unknown alliance'}}else c.to_character=c.to_characters.length>0?c.to_characters.length>1?'<i class="icon-asterisk"></i> Multiple characters':EVEthing.mail.data.characters[c.to_characters[0]]||"*UNKNOWN*":EVEthing.mail.data.characters[c.character_id]||"*UNKNOWN*"}$("#mail-list-loading").remove(),EVEthing.mail.build_table()}),Handlebars.registerHelper("rowClass",function(){return new Handlebars.SafeString(this.read?' class="success"':' class="error"')}),Handlebars.registerHelper("toText",function(){return new Handlebars.SafeString(this.to_list||this.to_alliance||this.to_corporation||this.to_character)}),Handlebars.registerHelper("senderText",function(){return EVEthing.mail.data.characters[this.sender_id]||"*UNKNOWN*"}),Handlebars.registerHelper("subjectText",function(){return this.title||"*BLANK SUBJECT*"})},onload_hash:function(){var a=document.location.hash.replace("#","").split(";");if(2===a.length){var b=a[0].split("");6===b.length&&("f"===b[0]?$("#filter-unread").removeClass("active"):$("#filter-unread").addClass("active"),"f"===b[1]?$("#filter-read").removeClass("active"):$("#filter-read").addClass("active"),$("#filter-to-character").prop("checked","f"===b[2]?!1:"checked"),$("#filter-to-corporation").prop("checked","f"===b[3]?!1:"checked"),$("#filter-to-alliance").prop("checked","f"===b[4]?!1:"checked"),$("#filter-to-mailing-list").prop("checked","f"===b[5]?!1:"checked"),$("#filter-character").val(a[1]))}},resize:function(){var a=($("#wrap").height()-$("#wrap .navbar").height()-$("#footer").height()-40)/2,b={"min-height":a+"px","max-height":a+"px"};$(".mail-list").css(b),$(".mail-message").css(b)},build_table:function(){for(var a=Handlebars.getTemplate("mail_list"),b=$("#filter-unread").hasClass("active"),c=$("#filter-read").hasClass("active"),d=$("#filter-to-character").is(":checked"),e=$("#filter-to-corporation").is(":checked"),f=$("#filter-to-alliance").is(":checked"),g=$("#filter-to-mailing-list").is(":checked"),h=parseInt($("#filter-character").val()),i=0,j="",k=0;k<EVEthing.mail.data.messages.length;k++){var l=EVEthing.mail.data.messages[k],m=!0,n=!1;if(b&&!l.read&&(n=!0),c&&l.read&&(n=!0),m=n,m!==!1&&(h>0&&l.character_id!==h&&l.to_characters.indexOf(h)<0&&(m=!1),m!==!1)){var o=!1;(d&&l.to_character||e&&l.to_corporation||f&&l.to_alliance||g&&l.to_list)&&(o=!0),m===!0&&(m=o),m===!0&&(i++,j+=a(l))}}$("#mail-list-table tbody").html(j),0===i?$("#mail-list-filtered").show():$("#mail-list-filtered").hide(),$("#mail-list-check-all").prop("checked",!1),$("#mail-list-table").trigger("update"),document.location.hash=[b?"t":"f",c?"t":"f",d?"t":"f",e?"t":"f",f?"t":"f",g?"t":"f",";",h].join("")},mark_read_click:function(){var a=$("#mail-mark-read-form");$.post(a.attr("action"),a.serialize(),function(){$.each($("#mail-list-table tbody input:checked"),function(a,b){var c=$(b).closest("tr").attr("data-message-id");EVEthing.mail.data.message_map[c].read=!0}),EVEthing.mail.build_table()})},mail_check_all_click:function(){$("#mail-list-check-all").is(":checked")?$("#mail-list-table tbody input").prop("checked","checked"):$("#mail-list-table tbody input").prop("checked",!1)},mail_link_click:function(a){a.preventDefault&&a.preventDefault();for(var b=$(this).closest("tr"),c=parseInt($(this).attr("href").replace("#","")),d=0;d<EVEthing.mail.data.messages.length;d++){var e=EVEthing.mail.data.messages[d];if(e.message_id===c){$("#mail-message-from").html(EVEthing.mail.data.characters[e.sender_id]||"*UNKNOWN*"),$("#mail-message-subject").html(e.title),$("#mail-message-date").html(e.sent_date);var f=e.to_list||e.to_alliance||e.to_corporation;if(void 0===f){for(var g=[],d=0;d<e.to_characters.length;d++){var h=e.to_characters[d];g.push(void 0!==EVEthing.mail.characters[h]?"<strong>"+EVEthing.mail.characters[h]+"</strong>":EVEthing.mail.data.characters[h]||"*UNKNOWN*")}f=g.join(", ")}if($("#mail-message-to").html(f),void 0!==e.body)$("#mail-message-body").html(e.body);else{$("#mail-message-body").html('<i class="icon-spinner icon-spin icon-4x"></i>');var i=EVEthing.mail.body_url.replace("0000",c);$.get(i,function(a){a.body?(b.removeClass("warning"),e.body=a.body.replace(/\n/g,"<br>\n"),e.read=!0,$("#mail-message-body").html(e.body),EVEthing.mail.build_table()):$("#mail-message.body").html("<strong>ERROR:</strong> "+a.error)})}break}}return!1}},EVEthing.orders={onload:function(){$("[rel=tooltip]").each(function(){$(this).data("bs.tooltip").options.placement="right"})}},EVEthing.transactions={onload:function(){$("a").each(function(){var a=$(this).attr("href");if(void 0!==a&&"?page"===a.substr(0,5)){var b=parseQueryString();b.page=a.split(/=/)[1],$(this).attr("href","?"+$.param(b))}}),EVEthing.filters.bind_events(),EVEthing.filters.load_filters(EVEthing.transactions.filters)}},EVEthing.wallet_journal={onload:function(){$("a").each(function(){var a=$(this).attr("href");
if(void 0!==a&&"?page"===a.substr(0,5)){var b=parseQueryString();b.page=a.split(/=/)[1],$(this).attr("href","?"+$.param(b))}}),EVEthing.filters.bind_events(),EVEthing.filters.load_filters(EVEthing.wallet_journal.filters),$("#aggregate-form").submit(function(){var a=$(this).attr("action"),b=$("#filter-form, #aggregate-form").serialize();return window.location.href=a+"?"+b,!1})}};
//# sourceMappingURL=evething-combined.min.map